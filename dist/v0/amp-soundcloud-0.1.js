(window.AMP = window.AMP || []).push(function(AMP) {var process={env:{NODE_ENV:"production"}};var g="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function m(a,b){function e(){}e.prototype=b.prototype;a.prototype=new e;a.prototype.constructor=a;for(var c in b)if(g.Object.defineProperties){var d=g.Object.getOwnPropertyDescriptor(b,c);void 0!==d&&g.Object.defineProperty(a,c,d)}else a[c]=b[c]};var n=null,p="";var q=(new Date).getTime();function r(a,b,e){this.win=a.AMP_TEST?a.parent:a;this.levelFunc_=b;this.level_=this.calcLevel_();this.suffix_=e||""}
r.prototype.calcLevel_=function(){var a;if(n)a=n;else{if(window.context&&window.context.mode)a=window.context.mode;else{a=("localhost"==location.hostname||location.ancestorOrigins&&location.ancestorOrigins[0]&&0==location.ancestorOrigins[0].indexOf("http://localhost:"))&&!!document.querySelector('script[src*="/dist/"],script[src*="/base/"]');var b=location.originalHash||location.hash,e=Object.create(null);if(b){if(0==b.indexOf("?")||0==b.indexOf("#"))b=b.substr(1);for(var b=b.split("&"),c=0;c<b.length;c++){var d=
b[c],f=d.indexOf("="),h=void 0,l=void 0;-1!=f?(h=decodeURIComponent(d.substring(0,f)).trim(),l=decodeURIComponent(d.substring(f+1)).trim()):(h=decodeURIComponent(d).trim(),l="");h&&(e[h]=l)}}p||(p=a?"1463506055389":window.AMP_CONFIG&&window.AMP_CONFIG.v?window.AMP_CONFIG.v:"1463506055389");a={localDev:a,development:"1"==e.development||window.AMP_DEV_MODE,filter:e.filter,minified:"production"==process.env.NODE_ENV,test:window.AMP_TEST,log:e.log,version:p}}a=n=a}return this.win.console&&
this.win.console.log&&"0"!=a.log?this.win.ENABLE_LOG?4:a.localDev&&!a.log?3:this.levelFunc_(a):0};r.prototype.msg_=function(a,b,e){if(0!=this.level_){var c=this.win.console.log;"ERROR"==b?c=this.win.console.error||c:"INFO"==b?c=this.win.console.info||c:"WARN"==b&&(c=this.win.console.warn||c);e.unshift((new Date).getTime()-q,"["+a+"]");c.apply(this.win.console,e)}};r.prototype.isEnabled=function(){return 0!=this.level_};
r.prototype.fine=function(a,b){4<=this.level_&&this.msg_(a,"FINE",Array.prototype.slice.call(arguments,1))};r.prototype.info=function(a,b){3<=this.level_&&this.msg_(a,"INFO",Array.prototype.slice.call(arguments,1))};r.prototype.warn=function(a,b){2<=this.level_&&this.msg_(a,"WARN",Array.prototype.slice.call(arguments,1))};
r.prototype.error=function(a,b){if(1<=this.level_)this.msg_(a,"ERROR",Array.prototype.slice.call(arguments,1));else{var e=t.apply(null,Array.prototype.slice.call(arguments,1));this.prepareError_(e);this.win.setTimeout(function(){throw e;})}};r.prototype.createError=function(a){var b=t.apply(null,arguments);this.prepareError_(b);return b};
r.prototype.assert=function(a,b,e){var c=void 0;if(!a){var d=(b||"Assertion failed").split("%s"),f=d.shift(),h=f,l=[];""!=f&&l.push(f);for(f=2;f<arguments.length;f++){var k=arguments[f];k&&k.tagName&&(c=k);var w=d.shift();l.push(k);var x=w.trim();""!=x&&l.push(x);k=k instanceof Element?k.tagName.toLowerCase()+(k.id?"#"+k.id:""):k;h+=k+w}d=Error(h);d.fromAssert=!0;d.associatedElement=c;d.messageArray=l;this.prepareError_(d);throw d;}return a};
r.prototype.assertEnumValue=function(a,b,e){for(var c in a)if(a[c]==b)return a[c];this.assert(!1,'Unknown %s value: "%s"',e||"enum",b)};r.prototype.prepareError_=function(a){this.suffix_&&(a.message?-1==a.message.indexOf(this.suffix_)&&(a.message+=this.suffix_):a.message=this.suffix_)};function t(a){for(var b=null,e="",c=0;c<arguments.length;c++){var d=arguments[c];d instanceof Error&&!b?b=d:(e&&(e+=" "),e+=d)}b?e&&(b.message=e+": "+b.message):b=Error(e);return b}
var u=new r(window,function(a){var b=parseInt(a.log,10);return a.development||1<=b?4:0},"\u200b\u200b\u200b");new r(window,function(a){a=parseInt(a.log,10);return 3<=a?4:2<=a?3:0});function v(a){this.win=a;this.resolved_=Promise.resolve();this.taskCount_=0;this.canceled_={};this.startTime_=this.now()}v.prototype.now=function(){return Date.now()};v.prototype.timeSinceStart=function(){return this.now()-this.startTime_};v.prototype.delay=function(a,b){if(!b){var e=this,c="p"+this.taskCount_++;this.resolved_.then(function(){e.canceled_[c]?delete e.canceled_[c]:a()});return c}return this.win.setTimeout(a,b)};
v.prototype.cancel=function(a){"string"==typeof a?this.canceled_[a]=!0:this.win.clearTimeout(a)};v.prototype.promise=function(a,b){var e=this,c=null;return(new Promise(function(d,f){c=e.delay(function(){c=-1;d(b)},a);-1==c&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=c&&e.cancel(c);throw a;})};
v.prototype.timeoutPromise=function(a,b,e){var c=this,d=null,f=(new Promise(function(b,f){d=c.delay(function(){d=-1;f(u.createError(e||"timeout"))},a);-1==d&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=d&&c.cancel(d);throw a;});return b?Promise.race([f,b]):f};var y=new v(window);function z(a,b,e,c){function d(a){e(a);h()}var f=c||!1,h=void 0,h=function(){a&&a.removeEventListener(b,d,f);d=a=null};a.addEventListener(b,d,f);return h}
function A(a,b){var e=void 0,c=void 0,d=new Promise(function(b,d){a.complete||"complete"==a.readyState?b(a):(e="AUDIO"===a.tagName||"VIDEO"===a.tagName?z(a,"loadstart",function(){return b(a)}):z(a,"load",function(){return b(a)}),c=z(a,"error",function(){d(u.createError("Failed HTTP request for %s.",a))}))});return B(d,function(){e&&e();c&&c()},b)}function B(a,b,e){var c=void 0,c=void 0===e?a:y.timeoutPromise(e||0,a);return b?c.then(function(a){b();return a},function(a){b();throw a;}):c};function C(a){AMP.BaseElement.apply(this,arguments)}m(C,AMP.BaseElement);C.prototype.preconnectCallback=function(a){this.preconnect.url("https://api.soundcloud.com/",a)};C.prototype.isLayoutSupported=function(a){return"fixed-height"==a};
C.prototype.layoutCallback=function(){var a=this.element.getAttribute("height"),b=this.element.getAttribute("data-color"),e=this.element.getAttribute("data-visual"),c=u.assert(this.element.getAttribute("data-trackid"),"The data-trackid attribute is required for <amp-soundcloud> %s",this.element),d=this.element.ownerDocument.createElement("iframe");d.setAttribute("frameborder","no");d.setAttribute("scrolling","no");d.src="https://w.soundcloud.com/player/?url="+encodeURIComponent("https://api.soundcloud.com/tracks/"+
c);"true"===e?d.src+="&visual=true":b&&(d.src+="&color="+encodeURIComponent(b));this.applyFillContent(d);d.height=a;this.element.appendChild(d);this.iframe_=d;return A(d)};C.prototype.pauseCallback=function(){this.iframe_&&this.iframe_.contentWindow&&this.iframe_.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://w.soundcloud.com")};AMP.registerElement("amp-soundcloud",C);
});
//# sourceMappingURL=amp-soundcloud-0.1.js.map

