(function(){var process={env:{NODE_ENV:"production"}};var m=null,n="";var aa=(new Date).getTime();function w(a,b,c){this.win=a.AMP_TEST?a.parent:a;this.levelFunc_=b;this.level_=this.calcLevel_();this.suffix_=c||""}
w.prototype.calcLevel_=function(){var a;if(m)a=m;else{if(window.context&&window.context.mode)a=window.context.mode;else{a=("localhost"==location.hostname||location.ancestorOrigins&&location.ancestorOrigins[0]&&0==location.ancestorOrigins[0].indexOf("http://localhost:"))&&!!document.querySelector('script[src*="/dist/"],script[src*="/base/"]');var b=location.originalHash||location.hash,c=Object.create(null);if(b){if(0==b.indexOf("?")||0==b.indexOf("#"))b=b.substr(1);for(var b=b.split("&"),d=0;d<b.length;d++){var e=
b[d],f=e.indexOf("="),g=void 0,h=void 0;-1!=f?(g=decodeURIComponent(e.substring(0,f)).trim(),h=decodeURIComponent(e.substring(f+1)).trim()):(g=decodeURIComponent(e).trim(),h="");g&&(c[g]=h)}}n||(n=a?"1463506055389":window.AMP_CONFIG&&window.AMP_CONFIG.v?window.AMP_CONFIG.v:"1463506055389");a={localDev:a,development:"1"==c.development||window.AMP_DEV_MODE,filter:c.filter,minified:"production"==process.env.NODE_ENV,test:window.AMP_TEST,log:c.log,version:n}}a=m=a}return this.win.console&&
this.win.console.log&&"0"!=a.log?this.win.ENABLE_LOG?4:a.localDev&&!a.log?3:this.levelFunc_(a):0};w.prototype.msg_=function(a,b,c){if(0!=this.level_){var d=this.win.console.log;"ERROR"==b?d=this.win.console.error||d:"INFO"==b?d=this.win.console.info||d:"WARN"==b&&(d=this.win.console.warn||d);c.unshift((new Date).getTime()-aa,"["+a+"]");d.apply(this.win.console,c)}};w.prototype.isEnabled=function(){return 0!=this.level_};
w.prototype.fine=function(a,b){4<=this.level_&&this.msg_(a,"FINE",Array.prototype.slice.call(arguments,1))};w.prototype.info=function(a,b){3<=this.level_&&this.msg_(a,"INFO",Array.prototype.slice.call(arguments,1))};w.prototype.warn=function(a,b){2<=this.level_&&this.msg_(a,"WARN",Array.prototype.slice.call(arguments,1))};
w.prototype.error=function(a,b){if(1<=this.level_)this.msg_(a,"ERROR",Array.prototype.slice.call(arguments,1));else{var c=ba.apply(null,Array.prototype.slice.call(arguments,1));this.prepareError_(c);this.win.setTimeout(function(){throw c;})}};w.prototype.createError=function(a){var b=ba.apply(null,arguments);this.prepareError_(b);return b};
w.prototype.assert=function(a,b,c){var d=void 0;if(!a){var e=(b||"Assertion failed").split("%s"),f=e.shift(),g=f,h=[];""!=f&&h.push(f);for(f=2;f<arguments.length;f++){var k=arguments[f];k&&k.tagName&&(d=k);var t=e.shift();h.push(k);var H=t.trim();""!=H&&h.push(H);k=k instanceof Element?k.tagName.toLowerCase()+(k.id?"#"+k.id:""):k;g+=k+t}e=Error(g);e.fromAssert=!0;e.associatedElement=d;e.messageArray=h;this.prepareError_(e);throw e;}return a};
w.prototype.assertEnumValue=function(a,b,c){for(var d in a)if(a[d]==b)return a[d];this.assert(!1,'Unknown %s value: "%s"',c||"enum",b)};w.prototype.prepareError_=function(a){this.suffix_&&(a.message?-1==a.message.indexOf(this.suffix_)&&(a.message+=this.suffix_):a.message=this.suffix_)};function ba(a){for(var b=null,c="",d=0;d<arguments.length;d++){var e=arguments[d];e instanceof Error&&!b?b=e:(c&&(c+=" "),c+=e)}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}
var z=new w(window,function(a){var b=parseInt(a.log,10);return a.development||1<=b?4:0},"\u200b\u200b\u200b");new w(window,function(a){a=parseInt(a.log,10);return 3<=a?4:2<=a?3:0});var A=window.document.createElement("a"),ca=Object.create(null);
function da(a){var b=ca[a];if(b)return b;A.href=a;var b={href:A.href,protocol:A.protocol,host:A.host,hostname:A.hostname,port:"0"==A.port?"":A.port,pathname:A.pathname,search:A.search,hash:A.hash},c;A.origin&&"null"!=A.origin?c=A.origin:(c=b,"string"==typeof c&&(c=da(c)),c="data:"!=c.protocol&&c.host?c.protocol+"//"+c.host:c.href);b.origin=c;z.assert(b.origin,"Origin must exist");ca[a]=window.AMP_TEST&&Object.freeze?Object.freeze(b):b;return b}
function ea(a){z.assert(/^https?\:/i.test(a),'URL must start with "http://" or "https://". Invalid value: %s',a);return da(a).href}function qa(a){var b=Object.create(null);if(!a)return b;if(0==a.indexOf("?")||0==a.indexOf("#"))a=a.substr(1);a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c],e=d.indexOf("="),f=void 0,g=void 0;-1!=e?(f=decodeURIComponent(d.substring(0,e)).trim(),g=decodeURIComponent(d.substring(e+1)).trim()):(f=decodeURIComponent(d).trim(),g="");f&&(b[f]=g)}return b};var ra=Object.prototype.hasOwnProperty;function sa(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(null!=d)for(var e in d)ra.call(d,e)&&(b[e]=d[e])}return b};function ta(a){return(a=Number(a))?0<a?1:-1:a};(function(a,b,c,d){function e(a,b){for(var c=0,d=a.length;c<d;c++)R(a[c],b)}function f(a){return function(b){Ba(b)&&(R(b,a),e(b.querySelectorAll(q),a))}}function g(a){var b=a.getAttribute("is");a=a.nodeName.toUpperCase();var c=x.call(y,b?"="+b.toUpperCase():"<"+a);return b&&-1<c&&!(-1<q.indexOf(a+'[is="'+b+'"]'))?-1:c}function h(a){var b=a.currentTarget,c=a.attrChange,d=a.attrName,e=a.target;!I||e&&e!==b||!b.attributeChangedCallback||"style"===d||a.prevValue===a.newValue||b.attributeChangedCallback(d,
c===a.ADDITION?null:a.prevValue,c===a.REMOVAL?null:a.newValue)}function k(a){var b=f(a);return function(a){C.push(b,a.target)}}function t(a){ga&&(ga=!1,a.currentTarget.removeEventListener("DOMContentLoaded",t));e((a.target||b).querySelectorAll(q),"detached"===a.detail?"detached":"attached");if(u)for(var c=0,d=D.length;c<d;c++)a=D[c],p.contains(a)||(d--,D.splice(c--,1),R(a,"detached"))}function H(a,b){ha.call(this,a,b);S.call(this,{target:this})}function T(a,b){Ca(a,b);J?J.observe(a,Da):(K&&(a.setAttribute=
H,a[l]=U(a),a.addEventListener("DOMSubtreeModified",S)),a.addEventListener("DOMAttrModified",h));a.createdCallback&&I&&(a.created=!0,a.createdCallback(),a.created=!1)}function ia(a){throw Error("A "+a+" type is already registered");}function R(a,b){var c,d=g(a);-1<d&&(V(a,E[d]),d=0,"attached"!==b||a.attached?"detached"!==b||a.detached||(a.attached=!1,a.detached=!0,d=1):(a.detached=!1,a.attached=!0,d=1,u&&0>x.call(D,a)&&D.push(a)),d&&(c=a[b+"Callback"])&&c.call(a))}if(!(d in b)){var l="__"+d+(1E5*
Math.random()>>0),Ea=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,Fa="ANNOTATION-XML COLOR-PROFILE FONT-FACE FONT-FACE-SRC FONT-FACE-URI FONT-FACE-FORMAT FONT-FACE-NAME MISSING-GLYPH".split(" "),y=[],E=[],q="",p=b.documentElement,x=y.indexOf||function(a){for(var b=this.length;b--&&this[b]!==a;);return b},W=c.prototype,X=W.hasOwnProperty,L=W.isPrototypeOf,ja=c.defineProperty,Y=c.getOwnPropertyDescriptor,ka=c.getOwnPropertyNames,Ga=c.getPrototypeOf,la=c.setPrototypeOf,ma=!!c.__proto__,Ha=c.create||function fa(a){return a?
(fa.prototype=a,new fa):this},Ca=la||(ma?function(a,b){a.__proto__=b;return a}:ka&&Y?function(){return function(a,b){do for(var c=a,d=b,e=void 0,f=ka(d),g=0,h=f.length;g<h;g++)e=f[g],X.call(c,e)||ja(c,e,Y(d,e));while((b=Ga(b))&&!L.call(b,a));return a}}():function(a,b){for(var c in b)a[c]=b[c];return a}),F=a.MutationObserver||a.WebKitMutationObserver,r=(a.HTMLElement||a.Element||a.Node).prototype,u=!L.call(r,p),Ba=u?function(a){return 1===a.nodeType}:function(a){return L.call(r,a)},D=u&&[],Ia=r.cloneNode,
ha=r.setAttribute,Ja=r.removeAttribute,Ka=b.createElement,Da=F&&{attributes:!0,characterData:!0,attributeOldValue:!0},na=F||function(){K=!1;p.removeEventListener("DOMAttrModified",na)},C,oa=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.msRequestAnimationFrame||function(a){setTimeout(a,10)},pa=!1,K=!0,ga=!0,I=!0,S,M,U,J,V,G;la||ma?(V=function(a,b){L.call(b,a)||T(a,b)},G=T):G=V=function(a,b){a[l]||(a[l]=c(!0),T(a,b))};u?(K=!1,function(){function a(b){var c=b.currentTarget,
d=c[l];b=b.propertyName;var e;d.hasOwnProperty(b)&&(d=d[b],e=new CustomEvent("DOMAttrModified",{bubbles:!0}),e.attrName=d.name,e.prevValue=d.value||null,e.newValue=d.value=c[b]||null,null==e.prevValue?e.ADDITION=e.attrChange=0:e.MODIFICATION=e.attrChange=1,c.dispatchEvent(e))}function b(a,c){var d=this.hasAttribute(a),e=d&&this.getAttribute(a),f=new CustomEvent("DOMAttrModified",{bubbles:!0});ha.call(this,a,c);f.attrName=a;f.prevValue=d?e:null;f.newValue=c;d?f.MODIFICATION=f.attrChange=1:f.ADDITION=
f.attrChange=0;this.dispatchEvent(f)}function c(a){var b=new CustomEvent("DOMAttrModified",{bubbles:!0});b.attrName=a;b.prevValue=this.getAttribute(a);b.newValue=null;b.REMOVAL=b.attrChange=2;Ja.call(this,a);this.dispatchEvent(b)}var d=Y(r,"addEventListener"),e=d.value;d.value=function(d,f,g){"DOMAttrModified"===d&&this.attributeChangedCallback&&this.setAttribute!==b&&(this[l]={className:{name:"class",value:this.className}},this.setAttribute=b,this.removeAttribute=c,e.call(this,"propertychange",a));
e.call(this,d,f,g)};ja(r,"addEventListener",d)}()):F||(p.addEventListener("DOMAttrModified",na),p.setAttribute(l,1),p.removeAttribute(l),K&&(S=function(a){var b,c;if(this===a.target){a=this[l];this[l]=b=U(this);for(c in b){if(!(c in a))return M(0,this,c,a[c],b[c],"ADDITION");if(b[c]!==a[c])return M(1,this,c,a[c],b[c],"MODIFICATION")}for(c in a)if(!(c in b))return M(2,this,c,a[c],b[c],"REMOVAL")}},M=function(a,b,c,d,e,f){b={attrChange:a,currentTarget:b,attrName:c,prevValue:d,newValue:e};b[f]=a;h(b)},
U=function(a){for(var b,c={},d=a.attributes,e=0,f=d.length;e<f;e++)a=d[e],b=a.name,"setAttribute"!==b&&(c[b]=a.value);return c}));b[d]=function(a,c){function d(){return l?b.createElement(p,v):b.createElement(p)}v=a.toUpperCase();pa||(pa=!0,F?(J=function(a,b){function c(a,b){for(var d=0,e=a.length;d<e;b(a[d++]));}return new F(function(d){for(var e,f,g,h=0,k=d.length;h<k;h++)e=d[h],"childList"===e.type?(c(e.addedNodes,a),c(e.removedNodes,b)):(f=e.target,I&&f.attributeChangedCallback&&"style"!==e.attributeName&&
(g=f.getAttribute(e.attributeName),g!==e.oldValue&&f.attributeChangedCallback(e.attributeName,e.oldValue,g)))})}(f("attached"),f("detached")),J.observe(b,{childList:!0,subtree:!0})):(C=[],oa(function La(){for(;C.length;)C.shift().call(null,C.shift());oa(La)}),b.addEventListener("DOMNodeInserted",k("attached")),b.addEventListener("DOMNodeRemoved",k("detached"))),b.addEventListener("DOMContentLoaded",t),b.addEventListener("readystatechange",t),b.createElement=function(a,c){var d=Ka.apply(b,arguments),
e=""+a,f=x.call(y,(c?"=":"<")+(c||e).toUpperCase()),g=-1<f;c&&(d.setAttribute("is",c=c.toLowerCase()),g&&(e=e.toUpperCase(),g=-1<q.indexOf(e+'[is="'+c+'"]')));I=!b.createElement.innerHTMLHelper;g&&G(d,E[f]);return d},r.cloneNode=function(a){var b=Ia.call(this,!!a),c=g(b);-1<c&&G(b,E[c]);if(a){a=b.querySelectorAll(q);for(var c=0,d=a.length,e;c<d;c++)e=a[c],G(e,E[g(e)])}return b});-2<x.call(y,"="+v)+x.call(y,"<"+v)&&ia(a);if(!Ea.test(v)||-1<x.call(Fa,v))throw Error("The type "+a+" is invalid");var h=
c||W,l=X.call(h,"extends"),p=l?c["extends"].toUpperCase():v,v,u;l&&-1<x.call(y,"<"+p)&&ia(p);u=y.push((l?"=":"<")+v)-1;q=q.concat(q.length?",":"",l?p+'[is="'+a.toLowerCase()+'"]':p);d.prototype=E[u]=X.call(h,"prototype")?h.prototype:Ha(r);e(b.querySelectorAll(q),"attached");return d}}})(window,document,Object,"registerElement");function B(a){if(!(this instanceof B))throw new TypeError("Constructor Promise requires `new`");if(!N(a))throw new TypeError("Must pass resolver function");this._state=ua;this._value=[];this._isChainEnd=!0;O(this,va(this,wa),va(this,xa),{then:a})}B.prototype.then=function(a,b){a=N(a)?a:void 0;b=N(b)?b:void 0;if(a||b)this._isChainEnd=!1;return this._state(this._value,a,b)};B.prototype.catch=function(a){return this.then(void 0,a)};
function ya(a){return a===Object(a)&&a instanceof this?a:new this(function(b){b(a)})}function za(a){return new this(function(b,c){c(a)})}function Aa(a){var b=this;return new b(function(c,d){var e=a.length,f=Array(e);if(0===e)return c(f);Ma(a,function(a,h){b.resolve(a).then(function(a){f[h]=a;0===--e&&c(f)},d)})})}function Na(a){var b=this;return new b(function(c,d){for(var e=0,f=a.length;e<f;e++)b.resolve(a[e]).then(c,d)})}
function wa(a,b,c,d){if(!b)return this;d||(d=new Oa(this.constructor));Pa(Qa(d,b,a));return d.promise}function xa(a,b,c,d){if(!c)return this;d||(d=new Oa(this.constructor));Pa(Qa(d,c,a));return d.promise}function ua(a,b,c,d){if(!b&&!c)return this;d||(d=new Oa(this.constructor));a.push({deferred:d,onFulfilled:b||d.resolve,onRejected:c||d.reject});return d.promise}function Oa(a){var b=this;this.promise=new a(function(a,d){b.resolve=a;b.reject=d});return b}
function Ra(a,b,c){var d=a._value;a._state=b;a._value=c;for(var e=0;e<d.length;e++){var f=d[e];a._state(c,f.onFulfilled,f.onRejected,f.deferred)}b===xa&&a._isChainEnd&&setTimeout(function(){if(a._isChainEnd)throw c;},0)}function va(a,b){return function(c){Ra(a,b,c)}}function Sa(){}function N(a){return"function"===typeof a}function Ma(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}
function Qa(a,b,c){var d=a.promise,e=a.resolve,f=a.reject;return function(){try{var a=b(c);e!==b&&f!==b&&O(d,e,f,a,a)}catch(h){f(h)}}}var Pa=function(){function a(){for(var a=0;a<d;a++){var b=c[a];c[a]=null;b()}d=0}var b;"undefined"!==typeof window&&window.postMessage?(window.addEventListener("message",a),b=function(){window.postMessage("macro-task","*")}):b=function(){setTimeout(a,0)};var c=Array(16),d=0;return function(a){0===d&&b();c[d++]=a}}();
function O(a,b,c,d,e){var f=c,g,h;try{if(d===a)throw new TypeError("Cannot fulfill promise with itself");var k=d===Object(d);k&&d instanceof a.constructor?Ra(a,d._state,d._value):k&&(g=d.then)&&N(g)?(h=function(d){h=f=Sa;O(a,b,c,d,d)},f=function(a){h=f=Sa;c(a)},g.call(e,function(a){h(a)},function(a){f(a)})):b(d)}catch(t){f(t)}};window.Math.sign||(window.Math.sign=ta);window.Object.assign||(window.Object.assign=sa);var P=window;P.Promise||(P.Promise=B,B.default&&(P.Promise=B.default),P.Promise.resolve=ya,P.Promise.reject=za,P.Promise.all=Aa,P.Promise.race=Na);function Q(a){this.win=a;this.resolved_=Promise.resolve();this.taskCount_=0;this.canceled_={};this.startTime_=this.now()}Q.prototype.now=function(){return Date.now()};Q.prototype.timeSinceStart=function(){return this.now()-this.startTime_};Q.prototype.delay=function(a,b){if(!b){var c=this,d="p"+this.taskCount_++;this.resolved_.then(function(){c.canceled_[d]?delete c.canceled_[d]:a()});return d}return this.win.setTimeout(a,b)};
Q.prototype.cancel=function(a){"string"==typeof a?this.canceled_[a]=!0:this.win.clearTimeout(a)};Q.prototype.promise=function(a,b){var c=this,d=null;return(new Promise(function(e,f){d=c.delay(function(){d=-1;e(b)},a);-1==d&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=d&&c.cancel(d);throw a;})};
Q.prototype.timeoutPromise=function(a,b,c){var d=this,e=null,f=(new Promise(function(b,f){e=d.delay(function(){e=-1;f(z.createError(c||"timeout"))},a);-1==e&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=e&&d.cancel(e);throw a;});return b?Promise.race([f,b]):f};new Q(window);function Ta(a,b,c,d){var e=d||!1;a.addEventListener(b,c,e);return function(){a&&a.removeEventListener(b,c,e);a=c=null}};function Z(a){this.win=a}Z.prototype.start=function(){this.setStyles_();this.postbackOrRedirect_()};Z.prototype.postbackOrRedirect_=function(){var a=qa(this.win.location.search);if(this.win.opener&&this.win.opener!=this.win)return this.postback_().then(this.postbackSuccess_.bind(this),this.postbackError_.bind(this));if(a.url)return this.win.location.replace(ea(a.url)),Promise.resolve();a=Error("No opener or return location available");this.postbackError_(a);return Promise.reject(a)};
Z.prototype.setStyles_=function(){var a=this.win.document,b=a.createElement("style");b.textContent=this.buildStyles_();a.head.appendChild(b)};
Z.prototype.buildStyles_=function(){for(var a=qa(this.win.location.search),b=this.win.document,c=this.win.navigator,a=[a.hl,c.language,c.userLanguage,"en-US"],c=0;c<a.length;c++){var d=a[c];if(d){if(d){for(var d=d.split("-"),e="",f="",g=0;g<d.length;g++)0<g&&(e+=", ",f+="-"),f+=0==g?d[g].toLowerCase():d[g].toUpperCase(),f=f.replace(/[^a-zA-Z\-]/g,""),e+='[lang="'+f+'"]';d=e}else d=null;if(d&&b.querySelector(d))return d+" {display: block}"}}return""};
Z.prototype.postback_=function(){function a(){}var b=this,c=this.win.location.hash;return(new Promise(function(d,e){var f=b.win.opener;f?(a=Ta(b.win,"message",function(a){a.data&&"amp"==a.data.sentinel&&"result-ack"==a.data.type&&d()}),f.postMessage({sentinel:"amp",type:"result",result:c},"*"),b.win.setTimeout(function(){e(Error("Timed out"))},5E3)):e(Error("Opener not available"))})).then(function(){a()},function(b){a();throw b;})};
Z.prototype.postbackSuccess_=function(){var a=this;try{this.win.close()}catch(b){}this.win.setTimeout(function(){a.postbackError_(Error("Failed to close the dialog"))},3E3)};
Z.prototype.postbackError_=function(a){var b=this;this.win.console&&this.win.console.log&&(this.win.console.error||this.win.console.log).call(this.win.console,"Postback failed: ",a);var c=this.win.document;c.documentElement.classList.toggle("amp-error",!0);c.documentElement.setAttribute("data-error","postback");c.getElementById("closeButton").onclick=function(){try{b.win.close()}catch(a){}b.win.setTimeout(function(){b.win.closed||c.documentElement.setAttribute("data-error","close")},1E3)}};(function(a,b){var c="loading"!=a.readyState;if(c)b();else{var d=function(){"loading"!=a.readyState&&(c||(c=!0,b()),a.removeEventListener("readystatechange",d))};a.addEventListener("readystatechange",d)}})(document,function(){(new Z(window)).start()});})();
//# sourceMappingURL=amp-login-done-0.1.js.map

