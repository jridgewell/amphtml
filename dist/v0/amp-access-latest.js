(window.AMP = window.AMP || []).push(function(AMP) {var process={env:{NODE_ENV:"production"}};var h=null,m="";
function v(){if(h)return h;var a;if(window.context&&window.context.mode)a=window.context.mode;else{a=("localhost"==location.hostname||location.ancestorOrigins&&location.ancestorOrigins[0]&&0==location.ancestorOrigins[0].indexOf("http://localhost:"))&&!!document.querySelector('script[src*="/dist/"],script[src*="/base/"]');var b=location.originalHash||location.hash,c=Object.create(null);if(b){if(0==b.indexOf("?")||0==b.indexOf("#"))b=b.substr(1);for(var b=b.split("&"),d=0;d<b.length;d++){var f=b[d],
e=f.indexOf("="),g=void 0,k=void 0;-1!=e?(g=decodeURIComponent(f.substring(0,e)).trim(),k=decodeURIComponent(f.substring(e+1)).trim()):(g=decodeURIComponent(f).trim(),k="");g&&(c[g]=k)}}m||(m=a?"1463506055389":window.AMP_CONFIG&&window.AMP_CONFIG.v?window.AMP_CONFIG.v:"1463506055389");a={localDev:a,development:"1"==c.development||window.AMP_DEV_MODE,filter:c.filter,minified:"production"==process.env.NODE_ENV,test:window.AMP_TEST,log:c.log,version:m}}return h=a};var aa=(new Date).getTime();function w(a,b,c){this.win=a.AMP_TEST?a.parent:a;this.levelFunc_=b;this.level_=this.calcLevel_();this.suffix_=c||""}w.prototype.calcLevel_=function(){var a=v();return this.win.console&&this.win.console.log&&"0"!=a.log?this.win.ENABLE_LOG?4:a.localDev&&!a.log?3:this.levelFunc_(a):0};
w.prototype.msg_=function(a,b,c){if(0!=this.level_){var d=this.win.console.log;"ERROR"==b?d=this.win.console.error||d:"INFO"==b?d=this.win.console.info||d:"WARN"==b&&(d=this.win.console.warn||d);c.unshift((new Date).getTime()-aa,"["+a+"]");d.apply(this.win.console,c)}};w.prototype.isEnabled=function(){return 0!=this.level_};w.prototype.fine=function(a,b){4<=this.level_&&this.msg_(a,"FINE",Array.prototype.slice.call(arguments,1))};
w.prototype.info=function(a,b){3<=this.level_&&this.msg_(a,"INFO",Array.prototype.slice.call(arguments,1))};w.prototype.warn=function(a,b){2<=this.level_&&this.msg_(a,"WARN",Array.prototype.slice.call(arguments,1))};w.prototype.error=function(a,b){if(1<=this.level_)this.msg_(a,"ERROR",Array.prototype.slice.call(arguments,1));else{var c=x.apply(null,Array.prototype.slice.call(arguments,1));this.prepareError_(c);this.win.setTimeout(function(){throw c;})}};
w.prototype.createError=function(a){var b=x.apply(null,arguments);this.prepareError_(b);return b};
w.prototype.assert=function(a,b,c){var d=void 0;if(!a){var f=(b||"Assertion failed").split("%s"),e=f.shift(),g=e,k=[];""!=e&&k.push(e);for(e=2;e<arguments.length;e++){var l=arguments[e];l&&l.tagName&&(d=l);var p=f.shift();k.push(l);var C=p.trim();""!=C&&k.push(C);l=l instanceof Element?l.tagName.toLowerCase()+(l.id?"#"+l.id:""):l;g+=l+p}f=Error(g);f.fromAssert=!0;f.associatedElement=d;f.messageArray=k;this.prepareError_(f);throw f;}return a};
w.prototype.assertEnumValue=function(a,b,c){for(var d in a)if(a[d]==b)return a[d];this.assert(!1,'Unknown %s value: "%s"',c||"enum",b)};w.prototype.prepareError_=function(a){this.suffix_&&(a.message?-1==a.message.indexOf(this.suffix_)&&(a.message+=this.suffix_):a.message=this.suffix_)};function x(a){for(var b=null,c="",d=0;d<arguments.length;d++){var f=arguments[d];f instanceof Error&&!b?b=f:(c&&(c+=" "),c+=f)}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}
var z=new w(window,function(a){var b=parseInt(a.log,10);return a.development||1<=b?4:0},"\u200b\u200b\u200b"),B=new w(window,function(a){a=parseInt(a.log,10);return 3<=a?4:2<=a?3:0});var ba=Object.prototype.toString;function ca(a,b){if(b.length>a.length)return!1;var c=a.length-b.length;return a.indexOf(b,c)==c};var E=window.document.createElement("a"),da=Object.create(null),ea=/[?&]amp_js[^&]*/;function F(a){var b=da[a];if(b)return b;E.href=a;b={href:E.href,protocol:E.protocol,host:E.host,hostname:E.hostname,port:"0"==E.port?"":E.port,pathname:E.pathname,search:E.search,hash:E.hash};b.origin=E.origin&&"null"!=E.origin?E.origin:fa(b);z.assert(b.origin,"Origin must exist");da[a]=window.AMP_TEST&&Object.freeze?Object.freeze(b):b;return b}
function G(a,b){z.assert(null!=a,"%s source must be available",b);var c=F(a);z.assert("https:"==c.protocol||/^(\/\/)/.test(a)||"localhost"==c.hostname||ca(c.hostname,".localhost"),'%s source must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,a);return a}
function ga(a){var b=Object.create(null);if(!a)return b;if(0==a.indexOf("?")||0==a.indexOf("#"))a=a.substr(1);a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c],f=d.indexOf("="),e=void 0,g=void 0;-1!=f?(e=decodeURIComponent(d.substring(0,f)).trim(),g=decodeURIComponent(d.substring(f+1)).trim()):(e=decodeURIComponent(d).trim(),g="");e&&(b[e]=g)}return b}function fa(a){"string"==typeof a&&(a=F(a));return"data:"!=a.protocol&&a.host?a.protocol+"//"+a.host:a.href}
function ha(a){var b=a.indexOf("#");return-1==b?a:a.substring(0,b)}function J(a){"string"==typeof a&&(a=F(a));var b=a.pathname.split("/")[1];return"https://cdn.ampproject.org"==a.origin||0==a.origin.indexOf("http://localhost:")&&("c"==b||"v"==b)}
function ia(a){"string"==typeof a&&(a=F(a));if(!J(a))return a.href;var b=a.pathname.split("/"),c=b[1];z.assert("c"==c||"v"==c,"Unknown path prefix in url %s",a.href);var c=b[2],d="s"==c?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(c);z.assert(0<d.indexOf("."),"Expected a . in origin %s",d);b.splice(1,"s"==c?3:2);b=d+b.join("/");c=(c=a.search)&&"?"!=c?(c=c.replace(ea,"").replace(/^[?&]/,""))?"?"+c:"":"";return b+c+(a.hash||"")};function ja(a,b,c){if(b(a))c();else{var d=a.ownerDocument.defaultView;if(d.MutationObserver){var f=new d.MutationObserver(function(){b(a)&&(f.disconnect(),c())});f.observe(a,{childList:!0})}else var e=d.setInterval(function(){b(a)&&(d.clearInterval(e),c())},5)}}function ka(a,b){ja(a.documentElement,function(){return!!a.body},b)}function la(a){return new Promise(function(b){ka(a,b)})}function ma(a,b){for(var c=a.firstElementChild;c;c=c.nextElementSibling)if(b(c))return c;return null}var K=void 0;
function na(a,b){if(null==K)try{a.ownerDocument.querySelector(":scope"),K=!0}catch(c){K=!1}if(K)return a.querySelector(":scope > "+b);b=b.toUpperCase();return ma(a,function(a){return a.tagName==b})};var L=function(){function a(a,b,c,d){c=c||{};for(d=a.length;d--;c[a[d]]=b);return c}function b(){this.yy={}}var c=[1,3],d=[1,4],f=[1,18],e=[1,13],g=[1,14],k=[1,15],l=[1,16],p=[1,17],C=[1,20],D=[1,21],n=[5,6,7,10],t=[5,6,7,10,15,16,17,18,19,20,21],H=[5,6,7,10,15,16,17,18,19,20,21,25],c={trace:function(){},yy:{},symbols_:{error:2,result:3,search_condition:4,EOF:5,OR:6,AND:7,NOT:8,"(":9,")":10,predicate:11,comparison_predicate:12,truthy_predicate:13,scalar_exp:14,EQ:15,DEQ:16,NEQ:17,LT:18,LTE:19,GT:20,
GTE:21,atom:22,field_ref:23,literal:24,DOT:25,field_name:26,NAME:27,STRING:28,NUMERIC:29,TRUE:30,FALSE:31,NULL:32,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"OR",7:"AND",8:"NOT",9:"(",10:")",15:"EQ",16:"DEQ",17:"NEQ",18:"LT",19:"LTE",20:"GT",21:"GTE",25:"DOT",27:"NAME",28:"STRING",29:"NUMERIC",30:"TRUE",31:"FALSE",32:"NULL"},productions_:[0,[3,2],[4,3],[4,3],[4,2],[4,3],[4,1],[11,1],[11,1],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[13,1],[14,1],[14,1],[22,1],[23,3],[23,1],[26,1],[24,
1],[24,1],[24,1],[24,1],[24,1]],performAction:function(a,b,c,d,f,e){b=e.length-1;switch(f){case 1:return e[b-1];case 2:this.$=e[b-2]||e[b];break;case 3:this.$=e[b-2]&&e[b];break;case 4:this.$=!e[b];break;case 5:this.$=e[b-1];break;case 6:case 7:case 8:case 17:case 18:case 19:this.$=e[b];break;case 9:this.$=e[b-2]===e[b];break;case 10:throw Error('"==" is not allowed, use "="');case 11:this.$=e[b-2]!==e[b];break;case 12:this.$=typeof e[b-2]==typeof e[b]&&e[b-2]<e[b];break;case 13:this.$=typeof e[b-
2]==typeof e[b]&&e[b-2]<=e[b];break;case 14:this.$=typeof e[b-2]==typeof e[b]&&e[b-2]>e[b];break;case 15:this.$=typeof e[b-2]==typeof e[b]&&e[b-2]>=e[b];break;case 16:this.$=void 0!==e[b]&&null!==e[b]&&""!==e[b]&&0!==e[b]&&!1!==e[b];break;case 20:this.$="[object Object]"==Object.prototype.toString.call(e[b-2])&&e[b-2].hasOwnProperty(e[b])?e[b-2][e[b]]:null;break;case 21:this.$=void 0!==d[e[b]]?d[e[b]]:null;break;case 22:this.$=a;break;case 23:this.$=a.substring(1,a.length-1);break;case 24:this.$=
Number(a);break;case 25:this.$=!0;break;case 26:this.$=!1;break;case 27:this.$=null}},table:[{3:1,4:2,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:f,28:e,29:g,30:k,31:l,32:p},{1:[3]},{5:[1,19],6:C,7:D},{4:22,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:f,28:e,29:g,30:k,31:l,32:p},{4:23,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:f,28:e,29:g,30:k,31:l,32:p},a(n,[2,6]),a(n,[2,7]),a(n,[2,8]),a(n,[2,16],{15:[1,24],16:[1,25],17:[1,26],18:[1,27],19:[1,28],20:[1,29],21:[1,30]}),
a(t,[2,17]),a(t,[2,18],{25:[1,31]}),a(t,[2,19]),a(H,[2,21]),a(t,[2,23]),a(t,[2,24]),a(t,[2,25]),a(t,[2,26]),a(t,[2,27]),a(H,[2,22]),{1:[2,1]},{4:32,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:f,28:e,29:g,30:k,31:l,32:p},{4:33,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:f,28:e,29:g,30:k,31:l,32:p},a(n,[2,4]),{6:C,7:D,10:[1,34]},{14:35,22:9,23:10,24:11,26:12,27:f,28:e,29:g,30:k,31:l,32:p},{14:36,22:9,23:10,24:11,26:12,27:f,28:e,29:g,30:k,31:l,32:p},{14:37,22:9,23:10,24:11,26:12,
27:f,28:e,29:g,30:k,31:l,32:p},{14:38,22:9,23:10,24:11,26:12,27:f,28:e,29:g,30:k,31:l,32:p},{14:39,22:9,23:10,24:11,26:12,27:f,28:e,29:g,30:k,31:l,32:p},{14:40,22:9,23:10,24:11,26:12,27:f,28:e,29:g,30:k,31:l,32:p},{14:41,22:9,23:10,24:11,26:12,27:f,28:e,29:g,30:k,31:l,32:p},{26:42,27:f},a([5,6,10],[2,2],{7:D}),a(n,[2,3]),a(n,[2,5]),a(n,[2,9]),a(n,[2,10]),a(n,[2,11]),a(n,[2,12]),a(n,[2,13]),a(n,[2,14]),a(n,[2,15]),a(H,[2,20])],defaultActions:{19:[2,1]},parseError:function(a,b){if(b.recoverable)this.trace(a);
else throw Error(a);},parse:function(a){var b=[0],c=[null],d=[],e=this.table,f="",g=0,k=0,l=0,p=d.slice.call(arguments,1),r=Object.create(this.lexer),n={},t;for(t in this.yy)Object.prototype.hasOwnProperty.call(this.yy,t)&&(n[t]=this.yy[t]);r.setInput(a,n);n.lexer=r;n.parser=this;"undefined"==typeof r.yylloc&&(r.yylloc={});t=r.yylloc;d.push(t);var C=r.options&&r.options.ranges;this.parseError="function"===typeof n.parseError?n.parseError:Object.getPrototypeOf(this).parseError;for(var q,D,A,u,I={},
N,y;;){A=b[b.length-1];if(this.defaultActions[A])u=this.defaultActions[A];else{if(null===q||"undefined"==typeof q)q=void 0,q=r.lex()||1,"number"!==typeof q&&(q=this.symbols_[q]||q);u=e[A]&&e[A][q]}if("undefined"===typeof u||!u.length||!u[0]){var H="";y=[];for(N in e[A])this.terminals_[N]&&2<N&&y.push("'"+this.terminals_[N]+"'");H=r.showPosition?"Parse error on line "+(g+1)+":\n"+r.showPosition()+"\nExpecting "+y.join(", ")+", got '"+(this.terminals_[q]||q)+"'":"Parse error on line "+(g+1)+": Unexpected "+
(1==q?"end of input":"'"+(this.terminals_[q]||q)+"'");this.parseError(H,{text:r.match,token:this.terminals_[q]||q,line:r.yylineno,loc:t,expected:y})}if(u[0]instanceof Array&&1<u.length)throw Error("Parse Error: multiple actions possible at state: "+A+", token: "+q);switch(u[0]){case 1:b.push(q);c.push(r.yytext);d.push(r.yylloc);b.push(u[1]);q=null;D?(q=D,D=null):(k=r.yyleng,f=r.yytext,g=r.yylineno,t=r.yylloc,0<l&&l--);break;case 2:y=this.productions_[u[1]][1];I.$=c[c.length-y];I._$={first_line:d[d.length-
(y||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(y||1)].first_column,last_column:d[d.length-1].last_column};C&&(I._$.range=[d[d.length-(y||1)].range[0],d[d.length-1].range[1]]);A=this.performAction.apply(I,[f,k,g,n,u[1],c,d].concat(p));if("undefined"!==typeof A)return A;y&&(b=b.slice(0,-2*y),c=c.slice(0,-1*y),d=d.slice(0,-1*y));b.push(this.productions_[u[1]][0]);c.push(I.$);d.push(I._$);u=e[b[b.length-2]][b[b.length-1]];b.push(u);break;case 3:return!0}}}},d=function(){return{EOF:1,
parseError:function(a,b){if(this.yy.parser)this.yy.parser.parseError(a,b);else throw Error(a);},setInput:function(a,b){this.yy=b||this.yy||{};this._input=a;this._more=this._backtrack=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;
this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-b);this.offset-=b;a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,
this.matched.length-1);c.length-1&&(this.yylineno-=c.length-1);var d=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===a.length?this.yylloc.first_column:0)+a[a.length-c.length].length-c[0].length:this.yylloc.first_column-b};this.options.ranges&&(this.yylloc.range=[d[0],d[0]+this.yyleng-b]);this.yyleng=this.yytext.length;return this},more:function(){this._more=!0;return this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=
!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=
this.match;20>a.length&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},test_match:function(a,b){var c,d;this.options.backtrack_lexer&&(d={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,
matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(d.yylloc.range=this.yylloc.range.slice(0)));if(c=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=c.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?c[c.length-1].length-c[c.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+
a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._backtrack=this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];c=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(c)return c;if(this._backtrack)for(var e in d)this[e]=d[e];return!1},next:function(){if(this.done)return this.EOF;
this._input||(this.done=!0);var a,b,c;this._more||(this.match=this.yytext="");for(var d=this._currentRules(),e=0;e<d.length;e++)if((b=this._input.match(this.rules[d[e]]))&&(!a||b[0].length>a[0].length))if(a=b,c=e,this.options.backtrack_lexer){a=this.test_match(b,d[e]);if(!1!==a)return a;if(this._backtrack)a=!1;else return!1}else if(!this.options.flex)break;return a?(a=this.test_match(a,d[c]),!1!==a?a:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+
this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){a=
this.conditionStack.length-1-Math.abs(a||0);return 0<=a?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(a,b,c){switch(c){case 1:return 7;case 2:return 6;case 3:return 8;case 4:return 32;case 5:return 30;case 6:return 30;case 7:return 31;case 8:return 31;case 9:return 9;case 10:return 10;case 11:return"|";case 12:return 19;case 13:return 18;case 14:return 21;case 15:return 20;case 16:return 17;
case 17:return 16;case 18:return 15;case 19:return 29;case 20:return 27;case 21:return 28;case 22:return 28;case 23:return 25;case 24:return"INVALID";case 25:return 5}},rules:[/^(?:\s+)/,/^(?:AND\b)/,/^(?:OR\b)/,/^(?:NOT\b)/,/^(?:NULL\b)/,/^(?:TRUE\b)/,/^(?:true\b)/,/^(?:FALSE\b)/,/^(?:false\b)/,/^(?:\()/,/^(?:\))/,/^(?:\|)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:!=)/,/^(?:==)/,/^(?:=)/,/^(?:[0-9]+(\.[0-9]+)?\b)/,/^(?:[a-zA-Z_][a-zA-Z0-9_]*)/,/^(?:'[^\']*')/,/^(?:"[^\"]*")/,/^(?:\.)/,/^(?:.)/,
/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0}}}}();c.lexer=d;b.prototype=c;c.Parser=b;return new b}();function M(a,b,c){var d=O(a),f=d[b];f||(f=d[b]={obj:null,promise:null,resolve:null});f.obj||(f.obj=c(a),f.promise||(f.promise=Promise.resolve(f.obj)),f.resolve&&f.resolve(f.obj));return f.obj}function oa(a,b){var c=O(a),d=c[b];if(d)return d.promise;var f=void 0,d=new Promise(function(a){f=a});c[b]={obj:null,promise:d,resolve:f};return d}function pa(a,b){var c=O(a);return c[b]?c[b].promise:null}function O(a){var b=a.services;b||(b=a.services={});return b};function P(a){this.win=a;this.resolved_=Promise.resolve();this.taskCount_=0;this.canceled_={};this.startTime_=this.now()}P.prototype.now=function(){return Date.now()};P.prototype.timeSinceStart=function(){return this.now()-this.startTime_};P.prototype.delay=function(a,b){if(!b){var c=this,d="p"+this.taskCount_++;this.resolved_.then(function(){c.canceled_[d]?delete c.canceled_[d]:a()});return d}return this.win.setTimeout(a,b)};
P.prototype.cancel=function(a){"string"==typeof a?this.canceled_[a]=!0:this.win.clearTimeout(a)};P.prototype.promise=function(a,b){var c=this,d=null;return(new Promise(function(f,e){d=c.delay(function(){d=-1;f(b)},a);-1==d&&e(Error("Failed to schedule timer."))})).catch(function(a){-1!=d&&c.cancel(d);throw a;})};
P.prototype.timeoutPromise=function(a,b,c){var d=this,f=null,e=(new Promise(function(b,e){f=d.delay(function(){f=-1;e(z.createError(c||"timeout"))},a);-1==f&&e(Error("Failed to schedule timer."))})).catch(function(a){-1!=f&&d.cancel(f);throw a;});return b?Promise.race([e,b]):e};var Q=new P(window);function R(a,b,c){this.win=a;this.context_=c;this.authorizationUrl_=z.assert(b.authorization,'"authorization" URL must be specified');G(this.authorizationUrl_,'"authorization"');this.pingbackUrl_=z.assert(b.pingback,'"pingback" URL must be specified');G(this.pingbackUrl_,'"pingback"');this.xhr_=M(a,"xhr");this.timer_=Q}R.prototype.getConfig=function(){return{authorizationUrl:this.authorizationUrl_,pingbackUrl:this.pingbackUrl_}};R.prototype.getAuthorizationUrl=function(){return this.authorizationUrl_};
R.prototype.isAuthorizationEnabled=function(){return!0};R.prototype.authorize=function(){var a=this;return this.context_.buildUrl(this.authorizationUrl_,!1).then(function(b){return a.timer_.timeoutPromise(3E3,a.xhr_.fetchJson(b,{credentials:"include",requireAmpResponseSourceOrigin:!0}))})};
R.prototype.pingback=function(){var a=this;return this.context_.buildUrl(this.pingbackUrl_,!0).then(function(b){return a.xhr_.sendSignal(b,{method:"POST",credentials:"include",requireAmpResponseSourceOrigin:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},body:""})})};function S(a,b,c){this.win=a;this.context_=c;this.authorizationResponse_=b.authorizationFallbackResponse||null;this.isProxyOrigin_=J(a.location)}S.prototype.getConfig=function(){return{authorizationResponse:this.authorizationResponse_}};S.prototype.isAuthorizationEnabled=function(){return!!this.authorizationResponse_&&!this.isProxyOrigin_};S.prototype.authorize=function(){return Promise.resolve(this.authorizationResponse_)};S.prototype.pingback=function(){return Promise.resolve()};var T=Object.create(null);function qa(a,b){if(b in T)return T[b];var c;b:{c=void 0;try{c=a.document.cookie}catch(g){}if(c){c=c.split(";");for(var d=0;d<c.length;d++){var f=c[d].trim(),e=f.indexOf("=");if(-1!=e&&"AMP_EXP"==decodeURIComponent(f.substring(0,e).trim())){c=decodeURIComponent(f.substring(e+1).trim());break b}}}c=null}c=-1!=(c?c.split(/\s*,\s*/g):[]).indexOf(b)?!0:a.AMP_CONFIG&&a.AMP_CONFIG.hasOwnProperty(b)?Math.random()<a.AMP_CONFIG[b]:!1;return T[b]=c};function U(a,b,c){this.win=a;this.context_=c;this.clientAdapter_=new R(a,b,c);this.viewer_=M(a,"viewer");this.xhr_=M(a,"xhr");this.timer_=Q;this.vsync_=M(a,"vsync");this.serverState_=(b=this.win.document.querySelector('meta[name="i-amp-access-state"]'))?b.getAttribute("content"):null;b=qa(a,"amp-access-server");this.isProxyOrigin_=J(a.location)||b;this.serviceUrl_=(b?this.viewer_.getParam("serverAccessService"):null)||ha(a.location.href)}
U.prototype.getConfig=function(){return{client:this.clientAdapter_.getConfig(),proxy:this.isProxyOrigin_,serverState:this.serverState_}};U.prototype.isAuthorizationEnabled=function(){return!0};
U.prototype.authorize=function(){var a=this;return this.isProxyOrigin_&&this.serverState_?this.context_.collectUrlVars(this.clientAdapter_.getAuthorizationUrl(),!1).then(function(b){var c={},d;for(d in b)null!=b[d]&&(c[d]=String(b[d]));b={url:ha(a.win.location.href),state:a.serverState_,vars:c};return a.timer_.timeoutPromise(3E3,a.xhr_.fetchDocument(a.serviceUrl_,{method:"POST",body:"request="+encodeURIComponent(JSON.stringify(b)),headers:{"Content-Type":"application/x-www-form-urlencoded"}}))}).then(function(b){var c=
b.querySelector('script[id="amp-access-data"]').textContent,d=JSON.parse(c);return a.replaceSections_(b).then(function(){return d})}):this.clientAdapter_.authorize()};U.prototype.pingback=function(){return this.clientAdapter_.pingback()};
U.prototype.replaceSections_=function(a){var b=this,c=a.querySelectorAll("[i-amp-access-id]");return this.vsync_.mutatePromise(function(){for(var a=0;a<c.length;a++){var f=c[a],e=f.getAttribute("i-amp-access-id"),g=b.win.document.querySelector("[i-amp-access-id="+e+"]");g?g.parentElement.replaceChild(b.win.document.importNode(f,!0),g):B.warn("amp-access-server","Section not found: ",e)}})};function V(a){this.win_=a;this.templateClassMap_={};this.templateClassResolvers_={};this.declaredTemplates_=void 0}V.prototype.renderTemplate=function(a,b){var c=this;return this.getImplementation_(a).then(function(a){return c.render_(a,b)})};V.prototype.renderTemplateArray=function(a,b){var c=this;return 0==b.length?Promise.resolve([]):this.getImplementation_(a).then(function(a){return b.map(function(b){return c.render_(a,b)})})};
V.prototype.findAndRenderTemplate=function(a,b){return this.renderTemplate(this.findTemplate_(a),b)};V.prototype.findAndRenderTemplateArray=function(a,b){return this.renderTemplateArray(this.findTemplate_(a),b)};V.prototype.findTemplate_=function(a){var b=null,b=(b=a.getAttribute("template"))?a.ownerDocument.getElementById(b):na(a,"template");z.assert(b,"Template not found for %s",a);z.assert("TEMPLATE"==b.tagName,'Template element must be a "template" tag %s',b);return b};
V.prototype.getImplementation_=function(a){var b=a.__AMP_IMPL_;if(b)return Promise.resolve(b);var b=z.assert(a.getAttribute("type"),"Type must be specified: %s",a),c=a.__AMP_WAIT_;if(c)return c;c=this.waitForTemplateClass_(a,b).then(function(b){b=a.__AMP_IMPL_=new b(a);delete a.__AMP_WAIT_;return b});return a.__AMP_WAIT_=c};
V.prototype.waitForTemplateClass_=function(a,b){if(this.templateClassMap_[b])return this.templateClassMap_[b];this.checkTemplateDeclared_(a,b);var c=void 0,d=new Promise(function(a){c=a});this.templateClassMap_[b]=d;this.templateClassResolvers_[b]=c;return d};
V.prototype.checkTemplateDeclared_=function(a,b){if(!this.declaredTemplates_){this.declaredTemplates_=this.win_.Object.create(null);for(var c=this.win_.document.querySelectorAll("script[custom-template]"),d=0;d<c.length;d++)this.declaredTemplates_[c[d].getAttribute("custom-template")]=!0}z.assert(this.declaredTemplates_[b],"Template must be declared for %s as <script custom-template=%s>",a,b)};
V.prototype.registerTemplate_=function(a,b){if(this.templateClassMap_[a]){var c=this.templateClassResolvers_[a];z.assert(c,"Duplicate template type: %s",a);delete this.templateClassResolvers_[a];c(b)}else this.templateClassMap_[a]=Promise.resolve(b)};V.prototype.render_=function(a,b){for(var c=a.render(b),d=c.getElementsByTagName("a"),f=0;f<d.length;f++){var e=d[f];e.hasAttribute("href")&&e.setAttribute("target","_blank")}return c};
function ra(a){return M(a,"templates",function(){return new V(a)})};function sa(a,b,c){return ta(a,b,c).then(function(a){return z.assert(a,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.",b,c,c,c)})}function ta(a,b,c){var d=pa(a,b);return d?d:Promise.resolve().then(function(){return a.ampExtendedElements[c]?oa(a,b):la(a.document).then(function(){return a.ampExtendedElements[c]?oa(a,b):null})})};function ua(a,b,c,d){var f=d||!1;a.addEventListener(b,c,f);return function(){a&&a.removeEventListener(b,c,f);a=c=null}}function va(a,b,c,d){function f(a){c(a);g()}var e=d||!1,g=void 0,g=function(){a&&a.removeEventListener(b,f,e);f=a=null};a.addEventListener(b,f,e);return g};function wa(a){var b=0;return function(){var c=Math.pow(a||2,b++),d=.3*c*Math.random();.5<Math.random()&&(d*=-1);c+=d;return 1E3*c}};var xa=Object.create(null),ya="Webkit webkit Moz moz ms O o".split(" ");function za(a,b,c,d,f){var e=a.style,g=xa[b];if(!g||f){g=b;if(void 0===e[b]){var k=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var l=0;l<ya.length;l++){var p=ya[l]+k;if(void 0!==e[p]){k=p;break a}}k=""}void 0!==e[k]&&(g=k)}f||(xa[b]=g)}(b=g)&&(a.style[b]=d?c+d:c)};function W(a){this.navigator=a.navigator}W.prototype.isIos=function(){return/iPhone|iPad|iPod/i.test(this.navigator.userAgent)};W.prototype.isSafari=function(){return/Safari/i.test(this.navigator.userAgent)&&!this.isChrome()&&!this.isEdge()};W.prototype.isChrome=function(){return/Chrome|CriOS/i.test(this.navigator.userAgent)&&!this.isEdge()};W.prototype.isFirefox=function(){return/Firefox/i.test(this.navigator.userAgent)&&!this.isEdge()};
W.prototype.isIe=function(){return/MSIE/i.test(this.navigator.userAgent)||/IEMobile/i.test(this.navigator.userAgent)};W.prototype.isEdge=function(){return/Edge/i.test(this.navigator.userAgent)};W.prototype.isWebKit=function(){return/WebKit/i.test(this.navigator.userAgent)&&!this.isEdge()};function Aa(a){return M(a,"platform",function(){return new W(a)})}Aa(window);function Ba(a,b,c,d,f){function e(){for(var b=a.styleSheets,c=0;c<b.length;c++)if(b[c].ownerNode==g)return!0;return!1}Aa(a.defaultView).isIos()&&d&&za(a.documentElement,"cursor","pointer");var g=a.createElement("style");g.textContent=b;b=null;d?g.setAttribute("amp-runtime",""):(g.setAttribute("amp-extension",f||""),b=a.querySelector("style[amp-runtime]"));Ca(a.head,g,b);if(e())c();else var k=setInterval(function(){e()&&(clearInterval(k),c())},4)}
function Ca(a,b,c){c?c.nextSibling?a.insertBefore(b,c.nextSibling):a.appendChild(b):a.insertBefore(b,a.firstChild)};(function(a){var b=wa(a);return function(a){return setTimeout(a,b())}})(1.5);var Da=/RETURN_URL/;function Ea(a,b){var c=M(a,"viewer");return parseInt(c.getParam("dialog"),10)?(new Fa(c,b)).open():(new X(a,c,b)).open()}function Fa(a,b){this.viewer=a;this.urlOrPromise=b}Fa.prototype.open=function(){var a=this,b=void 0,b="string"==typeof this.urlOrPromise?Promise.resolve(this.urlOrPromise):this.urlOrPromise;return b.then(function(b){b=Y(b,"RETURN_URL");return a.viewer.sendMessage("openDialog",{url:b},!0)})};
function X(a,b,c){this.win=a;this.viewer=b;this.urlOrPromise=c;this.messageUnlisten_=this.heartbeatInterval_=this.dialog_=this.reject_=this.resolve_=null}X.prototype.open=function(){var a=this;z.assert(!this.resolve_,"Dialog already opened");return(new Promise(function(b,c){a.resolve_=b;a.reject_=c;a.openInternal_()})).then(function(b){a.cleanup_();return b},function(b){a.cleanup_();throw b;})};
X.prototype.cleanup_=function(){this.reject_=this.resolve_=null;if(this.dialog_){try{this.dialog_.close()}catch(a){}this.dialog_=null}this.heartbeatInterval_&&(this.win.clearInterval(this.heartbeatInterval_),this.heartbeatInterval_=null);this.messageUnlisten_&&(this.messageUnlisten_(),this.messageUnlisten_=null)};
X.prototype.openInternal_=function(){var a=this.win.screen,b=Math.floor(Math.min(700,.9*a.width)),c=Math.floor(Math.min(450,.9*a.height)),a="height="+c+",width="+b+",left="+Math.floor((a.width-b)/2)+",top="+Math.floor((a.height-c)/2)+",resizable=yes,scrollbars=yes",d=this.getReturnUrl_(),b=null;if("string"==typeof this.urlOrPromise)c=Y(this.urlOrPromise,d),(this.dialog_=this.win.open(c,"_blank",a))&&(b=Promise.resolve());else if(this.dialog_=this.win.open("","_blank",a))var f=this,b=this.urlOrPromise.then(function(a){a=
Y(a,d);f.dialog_.location.replace(a)},function(a){throw Error("failed to resolve url: "+a);});if(b){var e=this;b.then(function(){e.setupDialog_(d)},function(a){e.loginDone_(null,a)})}else this.loginDone_(null,Error("failed to open dialog"))};
X.prototype.setupDialog_=function(a){var b=this,c=F(a).origin;this.heartbeatInterval_=this.win.setInterval(function(){b.dialog_.closed&&(b.win.clearInterval(b.heartbeatInterval_),b.heartbeatInterval_=null,b.win.setTimeout(function(){b.loginDone_("")},3E3))},500);this.messageUnlisten_=ua(this.win,"message",function(a){a.origin==c&&a.data&&"amp"==a.data.sentinel&&"result"==a.data.type&&(b.dialog_&&b.dialog_.postMessage({sentinel:"amp",type:"result-ack"},c),b.loginDone_(a.data.result))})};
X.prototype.loginDone_=function(a,b){this.resolve_&&(b?this.reject_(b):this.resolve_(a),this.cleanup_())};X.prototype.getReturnUrl_=function(){var a=this.viewer.getResolvedViewerUrl(),b=void 0;v().localDev?(b=this.win.location,b=b.protocol+"//"+b.host+"/extensions/amp-access/0.1/amp-login-done.html"):b="https://cdn.ampproject.org/v0/amp-login-done-0.1.html";return b+"?url="+encodeURIComponent(a)};
function Y(a,b){return Da.test(a)?a.replace(Da,encodeURIComponent(b)):a+(-1==a.indexOf("?")?"?":"&")+"return="+encodeURIComponent(b)};function Ga(a,b){var c="loading"!=a.readyState;if(c)b();else{var d=function(){"loading"!=a.readyState&&(c||(c=!0,b()),a.removeEventListener("readystatechange",d))};a.addEventListener("readystatechange",d)}};function Ha(a,b){for(var c=b.split("."),d=a,f=0;f<c.length;f++){var e=c[f];if(!e){d=void 0;break}if("[object Object]"!==ba.call(d)||void 0===d[e]||d.hasOwnProperty&&!d.hasOwnProperty(e)){d=void 0;break}d=d[e]}return d};var Ia={CLIENT:"client",SERVER:"server",OTHER:"other"};
function Z(a){var b=this;this.win=a;Ba(a.document,"\n/*# sourceURL=/extensions/amp-access/0.1/amp-access.css*/",function(){},!1,"amp-access");var c=a.document.getElementById("amp-access");if(this.enabled_=!!c){this.isServerEnabled_=qa(this.win,"amp-access-server");this.accessElement_=c;c=void 0;try{c=JSON.parse(this.accessElement_.textContent)}catch(d){throw z.createError('Failed to parse "amp-access" JSON: '+d);}this.type_=this.buildConfigType_(c);this.loginConfig_=this.buildConfigLoginMap_(c);this.authorizationFallbackResponse_=
c.authorizationFallbackResponse;this.adapter_=this.createAdapter_(c);this.pubOrigin_=fa(ia(a.location));this.timer_=Q;this.vsync_=M(a,"vsync");this.urlReplacements_=M(a,"url-replace");this.cid_=sa(a,"cid","amp-analytics");this.viewer_=M(a,"viewer");this.viewport_=M(a,"viewport");this.templates_=ra(a);this.resources_=M(a,"resources");this.openLoginDialog_=Ea.bind(null,a);this.authResponse_=this.readerIdPromise_=null;this.lastAuthorizationPromise_=this.firstAuthorizationPromise_=new Promise(function(a){b.firstAuthorizationResolver_=
a});this.reportViewPromise_=null;this.loginUrlMap_={};this.loginPromise_=null;this.loginStartTime_=0;this.analyticsPromise_=sa(a,"amp-analytics-instrumentation","amp-analytics");this.firstAuthorizationPromise_.then(function(){b.analyticsEvent_("access-authorization-received")})}}
Z.prototype.createAdapter_=function(a){var b={buildUrl:this.buildUrl_.bind(this),collectUrlVars:this.collectUrlVars_.bind(this)};switch(this.type_){case "client":return new R(this.win,a,b);case "server":return new U(this.win,a,b);case "other":return new S(this.win,a,b)}throw B.createError("Unsuported access type: ",this.type_);};
Z.prototype.buildConfigType_=function(a){a=a.type?z.assertEnumValue(Ia,a.type,"access type"):"client";"server"!=a||this.isServerEnabled_||(z.warn("amp-access",'Experiment "amp-access-server" is not enabled.'),a="client");return a};Z.prototype.buildConfigLoginMap_=function(a){a=a.login;var b={};if(a)if("string"==typeof a)b[""]=a;else if("[object Object]"===ba.call(a))for(var c in a)b[c]=a[c];else z.assert(!1,'"login" must be either a single URL or a map of URLs');for(var d in b)G(b[d]);return b};
Z.prototype.isEnabled=function(){return this.enabled_};Z.prototype.analyticsEvent_=function(a){this.analyticsPromise_.then(function(b){b.triggerEvent(a)})};Z.prototype.start_=function(){if(!this.enabled_)return z.info("amp-access",'Access is disabled - no "id=amp-access" element'),this;this.startInternal_();return this};
Z.prototype.startInternal_=function(){M(this.win,"action").installActionHandler(this.accessElement_,this.handleAction_.bind(this));this.buildLoginUrls_();this.runAuthorization_();this.scheduleView_(2E3);this.listenToBroadcasts_()};Z.prototype.listenToBroadcasts_=function(){var a=this;this.viewer_.onBroadcast(function(b){"amp-access-reauthorize"==b.type&&b.origin==a.pubOrigin_&&a.runAuthorization_()})};
Z.prototype.broadcastReauthorize_=function(){this.viewer_.broadcast({type:"amp-access-reauthorize",origin:this.pubOrigin_})};Z.prototype.getReaderId_=function(){if(!this.readerIdPromise_){var a=Promise.resolve();this.readerIdPromise_=this.cid_.then(function(b){return b.get({scope:"amp-access",createCookieIfNotPresent:!0},a)})}return this.readerIdPromise_};Z.prototype.buildUrl_=function(a,b){var c=this;return this.prepareUrlVars_(b).then(function(b){return c.urlReplacements_.expand(a,b)})};
Z.prototype.collectUrlVars_=function(a,b){var c=this;return this.prepareUrlVars_(b).then(function(b){return c.urlReplacements_.collectVars(a,b)})};Z.prototype.prepareUrlVars_=function(a){var b=this;return this.getReaderId_().then(function(c){c={READER_ID:c,ACCESS_READER_ID:c};a&&(c.AUTHDATA=function(a){if(b.authResponse_)return Ha(b.authResponse_,a)});return c})};
Z.prototype.runAuthorization_=function(a){var b=this;if(!this.adapter_.isAuthorizationEnabled())return this.firstAuthorizationResolver_(),Promise.resolve();this.toggleTopClass_("amp-access-loading",!0);var c=this.adapter_.authorize().catch(function(c){b.analyticsEvent_("access-authorization-failed");if(b.authorizationFallbackResponse_&&!a)return z.error("amp-access","Authorization failed: ",c),b.authorizationFallbackResponse_;throw c;}).then(function(a){b.setAuthResponse_(a);b.toggleTopClass_("amp-access-loading",
!1);b.toggleTopClass_("amp-access-error",!1);b.buildLoginUrls_();return new Promise(function(c,e){Ga(b.win.document,function(){b.applyAuthorization_(a).then(c,e)})})}).catch(function(a){z.error("amp-access","Authorization failed: ",a);b.toggleTopClass_("amp-access-loading",!1);b.toggleTopClass_("amp-access-error",!0)});this.lastAuthorizationPromise_=Promise.all([this.firstAuthorizationPromise_,c]);return c};Z.prototype.setAuthResponse_=function(a){this.authResponse_=a;this.firstAuthorizationResolver_()};
Z.prototype.getAccessReaderId=function(){return this.enabled_?this.getReaderId_():null};Z.prototype.getAuthdataField=function(a){var b=this;return this.enabled_?this.lastAuthorizationPromise_.then(function(){if(!b.authResponse_)return null;var c=Ha(b.authResponse_,a);return void 0!==c?c:null}):null};Z.prototype.whenFirstAuthorized=function(){return this.firstAuthorizationPromise_};
Z.prototype.applyAuthorization_=function(a){for(var b=this.win.document.querySelectorAll("[amp-access]"),c=[],d=0;d<b.length;d++)c.push(this.applyAuthorizationToElement_(b[d],a));return Promise.all(c)};
Z.prototype.applyAuthorizationToElement_=function(a,b){var c=a.getAttribute("amp-access"),d;a:{try{L.yy=b;d=!!L.parse(c);break a}finally{L.yy=null}d=void 0}var f=d,c=null;f&&(c=this.renderTemplates_(a,b));if(c){var e=this;return c.then(function(){return e.applyAuthorizationAttrs_(a,f)})}return this.applyAuthorizationAttrs_(a,f)};
Z.prototype.applyAuthorizationAttrs_=function(a,b){var c=!a.hasAttribute("amp-access-hide");return b==c?Promise.resolve():this.resources_.mutateElement(a,function(){b?a.removeAttribute("amp-access-hide"):a.setAttribute("amp-access-hide","")})};
Z.prototype.renderTemplates_=function(a,b){var c=[],d=a.querySelectorAll("[amp-access-template]");if(0<d.length)for(var f={i:0};f.i<d.length;f={i:f.i},f.i++){var e=this.renderTemplate_(a,d[f.i],b).catch(function(b){return function(c){B.error("amp-access","Template failed: ",c,d[b.i],a)}}(f));c.push(e)}return 0<c.length?Promise.all(c):null};
Z.prototype.renderTemplate_=function(a,b,c){var d=this,f=b,e=null;"TEMPLATE"!=f.tagName&&(e=f,f=e.__AMP_ACCESS__TEMPLATE);return f?this.templates_.renderTemplate(f,c).then(function(a){return d.vsync_.mutatePromise(function(){a.setAttribute("amp-access-template","");a.__AMP_ACCESS__TEMPLATE=f;f.parentElement?f.parentElement.replaceChild(a,f):e&&e.parentElement&&e.parentElement.replaceChild(a,e)})}):Promise.reject(Error("template not found"))};
Z.prototype.scheduleView_=function(a){var b=this;this.reportViewPromise_=null;Ga(this.win.document,function(){b.viewer_.isVisible()&&b.reportWhenViewed_(a);b.viewer_.onVisibilityChanged(function(){b.viewer_.isVisible()&&b.reportWhenViewed_(a)})})};
Z.prototype.reportWhenViewed_=function(a){var b=this;if(this.reportViewPromise_)return this.reportViewPromise_;this.reportViewPromise_=this.whenViewed_(a).then(function(){return b.lastAuthorizationPromise_}).then(function(){b.analyticsEvent_("access-viewed");return b.reportViewToServer_()}).catch(function(a){b.reportViewPromise_=null;throw a;});this.reportViewPromise_.then(this.broadcastReauthorize_.bind(this));return this.reportViewPromise_};
Z.prototype.whenViewed_=function(a){var b=this;if(0==a)return Promise.resolve();var c=[];return(new Promise(function(d,f){c.push(b.viewer_.onVisibilityChanged(function(){b.viewer_.isVisible()||f(Error("CANCELLED"))}));var e=b.timer_.delay(d,a);c.push(function(){return b.timer_.cancel(e)});c.push(b.viewport_.onScroll(d));c.push(va(b.win.document.documentElement,"click",d))})).then(function(){c.forEach(function(a){return a()})},function(a){c.forEach(function(a){return a()});throw a;})};
Z.prototype.reportViewToServer_=function(){var a=this;return this.adapter_.pingback().then(function(){a.analyticsEvent_("access-pingback-sent")}).catch(function(b){a.analyticsEvent_("access-pingback-failed");throw z.createError("Pingback failed: ",b);})};Z.prototype.toggleTopClass_=function(a,b){var c=this;this.vsync_.mutate(function(){c.win.document.documentElement.classList.toggle(a,b)})};
Z.prototype.handleAction_=function(a){"login"==a.method?(a.event&&a.event.preventDefault(),this.login("")):0==a.method.indexOf("login-")&&(a.event&&a.event.preventDefault(),this.login(a.method.substring(6)))};
Z.prototype.login=function(a){var b=this,c=this.timer_.now();if(this.loginPromise_&&1E3>c-this.loginStartTime_)return this.loginPromise_;z.assert(this.loginConfig_[a],"Login URL is not configured: %s",a);var d=z.assert(this.loginUrlMap_[a],"Login URL is not ready: %s",a);this.loginAnalyticsEvent_(a,"started");var f=this.openLoginDialog_(d).then(function(c){b.loginPromise_=null;c=ga(c).success;var d="true"==c||"yes"==c||"1"==c;d?b.loginAnalyticsEvent_(a,"success"):b.loginAnalyticsEvent_(a,"rejected");
if(d||!c)return b.broadcastReauthorize_(),b.runAuthorization_(!0).then(function(){b.scheduleView_(0)})}).catch(function(c){b.loginAnalyticsEvent_(a,"failed");b.loginPromise_==f&&(b.loginPromise_=null);throw c;});this.loginPromise_=f;this.loginStartTime_=c;return this.loginPromise_};Z.prototype.loginAnalyticsEvent_=function(a,b){this.analyticsEvent_("access-login-"+b);a&&this.analyticsEvent_("access-login-"+a+"-"+b)};
Z.prototype.buildLoginUrls_=function(){if(0==Object.keys(this.loginConfig_).length)return null;var a=[],b={$jscomp$this:void 0,k:void 0},c;for(c in this.loginConfig_)b.k=c,b.$jscomp$this=this,a.push(this.buildUrl_(this.loginConfig_[b.k],!0).then(function(a){return function(b){a.$jscomp$this.loginUrlMap_[a.k]=b;return{type:a.k,url:b}}}(b))),b={$jscomp$this:b.$jscomp$this,k:b.k};return Promise.all(a)};(function(a){return M(a,"access",function(){return(new Z(a)).start_()})})(AMP.win);
});
//# sourceMappingURL=amp-access-0.1.js.map

