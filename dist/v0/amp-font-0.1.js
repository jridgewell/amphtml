(window.AMP = window.AMP || []).push(function(AMP) {var process={env:{NODE_ENV:"production"}};var k="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function m(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(k.Object.defineProperties){var e=k.Object.getOwnPropertyDescriptor(b,d);void 0!==e&&k.Object.defineProperty(a,d,e)}else a[d]=b[d]};var n=null,p="";var r=(new Date).getTime();function t(a,b,c){this.win=a.AMP_TEST?a.parent:a;this.levelFunc_=b;this.level_=this.calcLevel_();this.suffix_=c||""}
t.prototype.calcLevel_=function(){var a;if(n)a=n;else{if(window.context&&window.context.mode)a=window.context.mode;else{a=("localhost"==location.hostname||location.ancestorOrigins&&location.ancestorOrigins[0]&&0==location.ancestorOrigins[0].indexOf("http://localhost:"))&&!!document.querySelector('script[src*="/dist/"],script[src*="/base/"]');var b=location.originalHash||location.hash,c=Object.create(null);if(b){if(0==b.indexOf("?")||0==b.indexOf("#"))b=b.substr(1);for(var b=b.split("&"),d=0;d<b.length;d++){var e=
b[d],f=e.indexOf("="),h=void 0,l=void 0;-1!=f?(h=decodeURIComponent(e.substring(0,f)).trim(),l=decodeURIComponent(e.substring(f+1)).trim()):(h=decodeURIComponent(e).trim(),l="");h&&(c[h]=l)}}p||(p=a?"1463506055389":window.AMP_CONFIG&&window.AMP_CONFIG.v?window.AMP_CONFIG.v:"1463506055389");a={localDev:a,development:"1"==c.development||window.AMP_DEV_MODE,filter:c.filter,minified:"production"==process.env.NODE_ENV,test:window.AMP_TEST,log:c.log,version:p}}a=n=a}return this.win.console&&
this.win.console.log&&"0"!=a.log?this.win.ENABLE_LOG?4:a.localDev&&!a.log?3:this.levelFunc_(a):0};t.prototype.msg_=function(a,b,c){if(0!=this.level_){var d=this.win.console.log;"ERROR"==b?d=this.win.console.error||d:"INFO"==b?d=this.win.console.info||d:"WARN"==b&&(d=this.win.console.warn||d);c.unshift((new Date).getTime()-r,"["+a+"]");d.apply(this.win.console,c)}};t.prototype.isEnabled=function(){return 0!=this.level_};
t.prototype.fine=function(a,b){4<=this.level_&&this.msg_(a,"FINE",Array.prototype.slice.call(arguments,1))};t.prototype.info=function(a,b){3<=this.level_&&this.msg_(a,"INFO",Array.prototype.slice.call(arguments,1))};t.prototype.warn=function(a,b){2<=this.level_&&this.msg_(a,"WARN",Array.prototype.slice.call(arguments,1))};
t.prototype.error=function(a,b){if(1<=this.level_)this.msg_(a,"ERROR",Array.prototype.slice.call(arguments,1));else{var c=u.apply(null,Array.prototype.slice.call(arguments,1));this.prepareError_(c);this.win.setTimeout(function(){throw c;})}};t.prototype.createError=function(a){var b=u.apply(null,arguments);this.prepareError_(b);return b};
t.prototype.assert=function(a,b,c){var d=void 0;if(!a){var e=(b||"Assertion failed").split("%s"),f=e.shift(),h=f,l=[];""!=f&&l.push(f);for(f=2;f<arguments.length;f++){var g=arguments[f];g&&g.tagName&&(d=g);var q=e.shift();l.push(g);var y=q.trim();""!=y&&l.push(y);g=g instanceof Element?g.tagName.toLowerCase()+(g.id?"#"+g.id:""):g;h+=g+q}e=Error(h);e.fromAssert=!0;e.associatedElement=d;e.messageArray=l;this.prepareError_(e);throw e;}return a};
t.prototype.assertEnumValue=function(a,b,c){for(var d in a)if(a[d]==b)return a[d];this.assert(!1,'Unknown %s value: "%s"',c||"enum",b)};t.prototype.prepareError_=function(a){this.suffix_&&(a.message?-1==a.message.indexOf(this.suffix_)&&(a.message+=this.suffix_):a.message=this.suffix_)};function u(a){for(var b=null,c="",d=0;d<arguments.length;d++){var e=arguments[d];e instanceof Error&&!b?b=e:(c&&(c+=" "),c+=e)}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}
var v=new t(window,function(a){var b=parseInt(a.log,10);return a.development||1<=b?4:0},"\u200b\u200b\u200b");new t(window,function(a){a=parseInt(a.log,10);return 3<=a?4:2<=a?3:0});function w(a,b,c){var d=a.services;d||(d=a.services={});var e=d[b];e||(e=d[b]={obj:null,promise:null,resolve:null});e.obj||(e.obj=c(a),e.promise||(e.promise=Promise.resolve(e.obj)),e.resolve&&e.resolve(e.obj));return e.obj};function x(a){this.win=a;this.resolved_=Promise.resolve();this.taskCount_=0;this.canceled_={};this.startTime_=this.now()}x.prototype.now=function(){return Date.now()};x.prototype.timeSinceStart=function(){return this.now()-this.startTime_};x.prototype.delay=function(a,b){if(!b){var c=this,d="p"+this.taskCount_++;this.resolved_.then(function(){c.canceled_[d]?delete c.canceled_[d]:a()});return d}return this.win.setTimeout(a,b)};
x.prototype.cancel=function(a){"string"==typeof a?this.canceled_[a]=!0:this.win.clearTimeout(a)};x.prototype.promise=function(a,b){var c=this,d=null;return(new Promise(function(e,f){d=c.delay(function(){d=-1;e(b)},a);-1==d&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=d&&c.cancel(d);throw a;})};
x.prototype.timeoutPromise=function(a,b,c){var d=this,e=null,f=(new Promise(function(b,f){e=d.delay(function(){e=-1;f(v.createError(c||"timeout"))},a);-1==e&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=e&&d.cancel(e);throw a;});return b?Promise.race([f,b]):f};var z=new x(window);var A=Object.create(null),B="Webkit webkit Moz moz ms O o".split(" ");function C(a,b){for(var c in b){var d=a,e=b[c],f;f=d.style;var h=A[c];if(!h){h=c;if(void 0===f[c]){var l=c.charAt(0).toUpperCase()+c.slice(1),g=void 0;a:{for(g=0;g<B.length;g++){var q=B[g]+l;if(void 0!==f[q]){g=q;break a}}g=""}l=g;void 0!==f[l]&&(h=l)}A[c]=h}(f=h)&&(d.style[f]=e)}};var D=["sans-serif","serif"];function E(a){this.win_=a;this.document_=a.document;this.customFontElement_=this.defaultFontElements_=this.container_=null;this.fontLoadRejected_=this.fontLoadResolved_=!1;this.fontConfig_=null}E.prototype.load=function(a,b){var c=this;this.fontConfig_=a;return z.timeoutPromise(b,this.load_()).then(function(){c.fontLoadResolved_=!0;c.dispose_()}).catch(function(a){c.fontLoadRejected_=!0;c.dispose_();throw a;})};
E.prototype.load_=function(){var a=this;return new Promise(function(b,c){var d=a.fontConfig_.style+" "+a.fontConfig_.variant+" "+a.fontConfig_.weight+" "+a.fontConfig_.size+" "+a.fontConfig_.family;a.canUseNativeApis_()?a.document_.fonts.check(d)?b():a.document_.fonts.load(d).then(function(){a.document_.fonts.check(d)?b():c(Error("Font could not be loaded, probably due to incorrect @font-face."))}).catch(c):a.loadWithPolyfill_().then(b,c)})};
E.prototype.canUseNativeApis_=function(){return"fonts"in this.document_};E.prototype.loadWithPolyfill_=function(){var a=this;return new Promise(function(b,c){var d=w(a.win_,"vsync");a.createElements_();var e=d.createTask({measure:function(){a.fontLoadResolved_?b():a.fontLoadRejected_?c(Error("Font loading timed out.")):a.compareMeasurements_()?b():e()}});e()})};
E.prototype.createElements_=function(){var a=this,b=this.container_=this.document_.createElement("div");C(b,{fontSize:"40px",fontVariant:this.fontConfig_.variant,left:"-999px",lineHeight:"normal",margin:0,padding:0,position:"absolute",top:"-999px",visibility:"hidden"});this.defaultFontElements_=[];D.forEach(function(c){var e=a.document_.createElement("div");a.defaultFontElements_.push(e);e.textContent="MAxmTYklsjo190QW";C(e,{fontFamily:c,margin:0,padding:0,whiteSpace:"nowrap"});b.appendChild(e)});
var c=this.customFontElement_=this.document_.createElement("div");C(c,{fontFamily:this.fontConfig_.family,margin:0,padding:0,whiteSpace:"nowrap"});c.textContent="MAxmTYklsjo190QW";b.appendChild(c);this.document_.body.appendChild(b)};E.prototype.compareMeasurements_=function(){var a=this;return this.defaultFontElements_.some(function(b){var c=2<Math.abs(b.offsetHeight-a.customFontElement_.offsetHeight);return 2<Math.abs(b.offsetWidth-a.customFontElement_.offsetWidth)||c})};
E.prototype.dispose_=function(){if(this.container_){var a=this.container_;a.parentElement&&a.parentElement.removeChild(a)}this.customFontElement_=this.defaultFontElements_=this.container_=null};function F(a){AMP.BaseElement.apply(this,arguments)}m(F,AMP.BaseElement);F.prototype.prerenderAllowed=function(){return!0};
F.prototype.buildCallback=function(){this.fontFamily_=v.assert(this.element.getAttribute("font-family"),"The font-family attribute is required for <amp-font> %s",this.element);this.fontWeight_=this.element.getAttribute("font-weight")||"400";this.fontStyle_=this.element.getAttribute("font-style")||"normal";this.fontVariant_=this.element.getAttribute("font-variant")||"normal";this.document_=this.getWin().document;this.documentElement_=this.document_.documentElement;this.fontLoader_=new E(this.getWin());
this.startLoad_()};F.prototype.startLoad_=function(){var a=this;this.fontLoader_.load({style:this.fontStyle_,variant:this.fontVariant_,weight:this.fontWeight_,size:"medium",family:this.fontFamily_},this.getTimeout_()).then(function(){a.onFontLoadSuccess_()}).catch(function(){a.onFontLoadError_();v.warn("amp-font","Font download timed out for "+a.fontFamily_)})};
F.prototype.onFontLoadSuccess_=function(){var a=this.element.getAttribute("on-load-add-class"),b=this.element.getAttribute("on-load-remove-class");this.onFontLoadFinish_(a,b)};F.prototype.onFontLoadError_=function(){var a=this.element.getAttribute("on-error-add-class"),b=this.element.getAttribute("on-error-remove-class");this.onFontLoadFinish_(a,b)};
F.prototype.onFontLoadFinish_=function(a,b){a&&this.documentElement_.classList.add(a);b&&(this.documentElement_.classList.remove(b),this.document_.body.classList.remove(b));this.dispose_()};F.prototype.dispose_=function(){this.fontLoader_=null};F.prototype.getTimeout_=function(){var a=parseInt(this.element.getAttribute("timeout"),10),a=isNaN(a)||0>a?3E3:a;return a=Math.max(a-z.timeSinceStart(),100)};AMP.registerElement("amp-font",F);
});
//# sourceMappingURL=amp-font-0.1.js.map

