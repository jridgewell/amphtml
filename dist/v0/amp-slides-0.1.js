(window.AMP = window.AMP || []).push(function(AMP) {var process={env:{NODE_ENV:"production"}};var h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function k(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(h.Object.defineProperties){var e=h.Object.getOwnPropertyDescriptor(b,d);void 0!==e&&h.Object.defineProperty(a,d,e)}else a[d]=b[d]};var n=null,p="";var q=(new Date).getTime();function r(a,b,c){this.win=a.AMP_TEST?a.parent:a;this.levelFunc_=b;this.level_=this.calcLevel_();this.suffix_=c||""}
r.prototype.calcLevel_=function(){var a;if(n)a=n;else{if(window.context&&window.context.mode)a=window.context.mode;else{a=("localhost"==location.hostname||location.ancestorOrigins&&location.ancestorOrigins[0]&&0==location.ancestorOrigins[0].indexOf("http://localhost:"))&&!!document.querySelector('script[src*="/dist/"],script[src*="/base/"]');var b=location.originalHash||location.hash,c=Object.create(null);if(b){if(0==b.indexOf("?")||0==b.indexOf("#"))b=b.substr(1);for(var b=b.split("&"),d=0;d<b.length;d++){var e=
b[d],f=e.indexOf("="),g=void 0,l=void 0;-1!=f?(g=decodeURIComponent(e.substring(0,f)).trim(),l=decodeURIComponent(e.substring(f+1)).trim()):(g=decodeURIComponent(e).trim(),l="");g&&(c[g]=l)}}p||(p=a?"1463506055389":window.AMP_CONFIG&&window.AMP_CONFIG.v?window.AMP_CONFIG.v:"1463506055389");a={localDev:a,development:"1"==c.development||window.AMP_DEV_MODE,filter:c.filter,minified:"production"==process.env.NODE_ENV,test:window.AMP_TEST,log:c.log,version:p}}a=n=a}return this.win.console&&
this.win.console.log&&"0"!=a.log?this.win.ENABLE_LOG?4:a.localDev&&!a.log?3:this.levelFunc_(a):0};r.prototype.msg_=function(a,b,c){if(0!=this.level_){var d=this.win.console.log;"ERROR"==b?d=this.win.console.error||d:"INFO"==b?d=this.win.console.info||d:"WARN"==b&&(d=this.win.console.warn||d);c.unshift((new Date).getTime()-q,"["+a+"]");d.apply(this.win.console,c)}};r.prototype.isEnabled=function(){return 0!=this.level_};
r.prototype.fine=function(a,b){4<=this.level_&&this.msg_(a,"FINE",Array.prototype.slice.call(arguments,1))};r.prototype.info=function(a,b){3<=this.level_&&this.msg_(a,"INFO",Array.prototype.slice.call(arguments,1))};r.prototype.warn=function(a,b){2<=this.level_&&this.msg_(a,"WARN",Array.prototype.slice.call(arguments,1))};
r.prototype.error=function(a,b){if(1<=this.level_)this.msg_(a,"ERROR",Array.prototype.slice.call(arguments,1));else{var c=t.apply(null,Array.prototype.slice.call(arguments,1));this.prepareError_(c);this.win.setTimeout(function(){throw c;})}};r.prototype.createError=function(a){var b=t.apply(null,arguments);this.prepareError_(b);return b};
r.prototype.assert=function(a,b,c){var d=void 0;if(!a){var e=(b||"Assertion failed").split("%s"),f=e.shift(),g=f,l=[];""!=f&&l.push(f);for(f=2;f<arguments.length;f++){var m=arguments[f];m&&m.tagName&&(d=m);var B=e.shift();l.push(m);var C=B.trim();""!=C&&l.push(C);m=m instanceof Element?m.tagName.toLowerCase()+(m.id?"#"+m.id:""):m;g+=m+B}e=Error(g);e.fromAssert=!0;e.associatedElement=d;e.messageArray=l;this.prepareError_(e);throw e;}return a};
r.prototype.assertEnumValue=function(a,b,c){for(var d in a)if(a[d]==b)return a[d];this.assert(!1,'Unknown %s value: "%s"',c||"enum",b)};r.prototype.prepareError_=function(a){this.suffix_&&(a.message?-1==a.message.indexOf(this.suffix_)&&(a.message+=this.suffix_):a.message=this.suffix_)};function t(a){for(var b=null,c="",d=0;d<arguments.length;d++){var e=arguments[d];e instanceof Error&&!b?b=e:(c&&(c+=" "),c+=e)}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}
var u=new r(window,function(a){var b=parseInt(a.log,10);return a.development||1<=b?4:0},"\u200b\u200b\u200b"),v=new r(window,function(a){a=parseInt(a.log,10);return 3<=a?4:2<=a?3:0});function w(a){this.win=a;this.resolved_=Promise.resolve();this.taskCount_=0;this.canceled_={};this.startTime_=this.now()}w.prototype.now=function(){return Date.now()};w.prototype.timeSinceStart=function(){return this.now()-this.startTime_};w.prototype.delay=function(a,b){if(!b){var c=this,d="p"+this.taskCount_++;this.resolved_.then(function(){c.canceled_[d]?delete c.canceled_[d]:a()});return d}return this.win.setTimeout(a,b)};
w.prototype.cancel=function(a){"string"==typeof a?this.canceled_[a]=!0:this.win.clearTimeout(a)};w.prototype.promise=function(a,b){var c=this,d=null;return(new Promise(function(e,f){d=c.delay(function(){d=-1;e(b)},a);-1==d&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=d&&c.cancel(d);throw a;})};
w.prototype.timeoutPromise=function(a,b,c){var d=this,e=null,f=(new Promise(function(b,f){e=d.delay(function(){e=-1;f(u.createError(c||"timeout"))},a);-1==e&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=e&&d.cancel(e);throw a;});return b?Promise.race([f,b]):f};var x=new w(window);var y=Object.create(null),z="Webkit webkit Moz moz ms O o".split(" ");function A(a,b,c){var d=y[b];if(!d||c){d=b;if(void 0===a[b]){var e=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var f=0;f<z.length;f++){var g=z[f]+e;if(void 0!==a[g]){e=g;break a}}e=""}void 0!==a[e]&&(d=e)}c||(y[b]=d)}return d}function D(a,b){for(var c in b){var d=a,e=b[c],f=A(d.style,c,void 0);f&&(d.style[f]=e)}};function E(a,b,c,d){a=new F(0,0,a,b,c,d,1,1);return a.solveYValueFromXValue.bind(a)}function F(a,b,c,d,e,f,g,l){this.x0=a;this.y0=b;this.x1=c;this.y1=d;this.x2=e;this.y2=f;this.x3=g;this.y3=l}F.prototype.solveYValueFromXValue=function(a){return this.getPointY(this.solvePositionFromXValue(a))};
F.prototype.solvePositionFromXValue=function(a){var b=(a-this.x0)/(this.x3-this.x0);if(0>=b)return 0;if(1<=b)return 1;for(var c=0,d=1,e=0;8>e;e++){var f=this.getPointX(b),g=(this.getPointX(b+1E-6)-f)/1E-6;if(1E-6>Math.abs(f-a))return b;if(1E-6>Math.abs(g))break;else f<a?c=b:d=b,b-=(f-a)/g}for(e=0;1E-6<Math.abs(value-a)&&8>e;e++)value<a?(c=b,b=(b+d)/2):(d=b,b=(b+c)/2),value=this.getPointX(b);return b};
F.prototype.getPointX=function(a){if(0==a)return this.x0;if(1==a)return this.x3;var b=this.lerp(this.x0,this.x1,a),c=this.lerp(this.x1,this.x2,a),d=this.lerp(this.x2,this.x3,a),b=this.lerp(b,c,a),c=this.lerp(c,d,a);return this.lerp(b,c,a)};F.prototype.getPointY=function(a){if(0==a)return this.y0;if(1==a)return this.y3;var b=this.lerp(this.y0,this.y1,a),c=this.lerp(this.y1,this.y2,a),d=this.lerp(this.y2,this.y3,a),b=this.lerp(b,c,a),c=this.lerp(c,d,a);return this.lerp(b,c,a)};
F.prototype.lerp=function(a,b,c){return a+c*(b-a)};var G=E(.25,.1,.25,1),H=E(.42,0,1,1),I=E(0,0,.58,1),J=E(.42,0,.58,1),K={linear:function(a){return a},ease:G,"ease-in":H,"ease-out":I,"ease-in-out":J};function L(){}function M(a){if(!a){a=window;var b=a.services;b||(b=a.services={});var c=b.vsync;c||(c=b.vsync={obj:null,promise:null,resolve:null});c.obj||(c.obj=(void 0)(a),c.promise||(c.promise=Promise.resolve(c.obj)),c.resolve&&c.resolve(c.obj));a=c.obj}this.vsync_=a;this.curve_=null;this.segments_=[]}function N(a,b,c){return(new M).setCurve(c).add(0,a,1).start(b)}M.prototype.setCurve=function(a){this.curve_=a?"string"==typeof a?K[a]:a:null;return this};
M.prototype.add=function(a,b,c,d){this.segments_.push({delay:a,func:b,duration:c,curve:d?"string"==typeof d?K[d]:d:null});return this};M.prototype.start=function(a){a=new O(this.vsync_,this.segments_,this.curve_,a);a.start_();return a};
function O(a,b,c,d){var e=this;this.vsync_=a;this.segments_=[];for(a=0;a<b.length;a++){var f=b[a];this.segments_.push({delay:f.delay,func:f.func,duration:f.duration,curve:f.curve||c,started:!1,completed:!1})}this.duration_=d;this.normTime_=this.normLinearTime_=this.startTime_=0;this.running_=!1;this.state_={};this.promise_=new Promise(function(a,b){e.resolve_=a;e.reject_=b});this.task_=this.vsync_.createAnimTask({mutate:this.stepMutate_.bind(this)})}
O.prototype.then=function(a,b){return a||b?this.promise_.then(a,b):this.promise_};O.prototype.thenAlways=function(a){a=a||L;return this.then(a,a)};O.prototype.halt=function(a){this.complete_(!1,a||0)};O.prototype.start_=function(){this.startTime_=x.now();this.running_=!0;this.vsync_.canAnimate()?this.task_(this.state_):(v.warn("Animation","cannot animate"),this.complete_(!1,0))};
O.prototype.complete_=function(a,b){if(this.running_){this.running_=!1;if(0!=b){1<this.segments_.length&&this.segments_.sort(function(a,b){return a.delay+a.duration-(b.delay+b.duration)});try{if(0<b)for(var c=0;c<this.segments_.length;c++)this.segments_[c].func(1,!0);else for(c=this.segments_.length-1;0<=c;c--)this.segments_[c].func(0,!1)}catch(d){v.error("Animation","completion failed: "+d,d),a=!1}}a?this.resolve_():this.reject_()}};
O.prototype.stepMutate_=function(){if(this.running_){for(var a=x.now(),a=Math.min((a-this.startTime_)/this.duration_,1),b=0;b<this.segments_.length;b++){var c=this.segments_[b];!c.started&&a>=c.delay&&(c.started=!0)}for(b=0;b<this.segments_.length;b++)c=this.segments_[b],c.started&&!c.completed&&this.mutateSegment_(c,a);1==a?this.complete_(!0,0):this.vsync_.canAnimate()?this.task_(this.state_):(v.warn("Animation","cancel animation"),this.complete_(!1,0))}};
O.prototype.mutateSegment_=function(a,b){var c=void 0,d=void 0;if(0<a.duration){if(d=c=Math.min((b-a.delay)/a.duration,1),a.curve&&1!=d)try{d=a.curve(c)}catch(e){v.error("Animation","step curve failed: "+e,e);this.complete_(!1,0);return}}else d=c=1;1==c&&(a.completed=!0);try{a.func(d,a.completed)}catch(e){v.error("Animation","step mutate failed: "+e,e),this.complete_(!1,0)}};function P(a){return function(b,c){for(var d=0;d<a.length;d++)(0,a[d])(b,c)}}function Q(a,b){return function(c,d){for(var e in b){var f=a,g=b[e](c,d),l=A(f.style,e,void 0);l&&(f.style[l]=g)}}}function R(a,b){return function(c){return a+(b-a)*c}}function S(a){return function(b){b=a(b);return"string"==typeof b?"translateX("+b+")":"translateX("+b+"px)"}}function T(a){return function(b){return"scale("+a(b)+")"}};function U(a){AMP.BaseElement.apply(this,arguments)}k(U,AMP.BaseElement);U.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};U.prototype.isReadyToBuild=function(){return 0<this.getRealChildren().length};
U.prototype.buildCallback=function(){var a=this;this.slides_=this.getRealChildren();this.slides_.forEach(function(b,c){a.setAsOwner(b);b.style.display=0<c?"none":"block";a.applyFillContent(b)});this.currentIndex_=0;this.prevButton_=this.element.ownerDocument.createElement("button");this.prevButton_.textContent="\u276e";D(this.prevButton_,{opacity:.6,position:"absolute",zIndex:10,left:"16px",top:"50%",padding:"8px",fontSize:"24px",marginTop:"-20px",pointerEvents:"all"});this.prevButton_.onclick=function(){a.go(-1,
!0)};this.element.appendChild(this.prevButton_);this.nextButton_=this.element.ownerDocument.createElement("button");this.nextButton_.textContent="\u276f";D(this.nextButton_,{opacity:.6,position:"absolute",zIndex:10,right:"16px",top:"50%",padding:"8px",fontSize:"24px",marginTop:"-20px",pointerEvents:"all"});this.nextButton_.onclick=function(){a.go(1,!0)};this.element.appendChild(this.nextButton_)};U.prototype.prerenderAllowed=function(){return!0};U.prototype.isRelayoutNeeded=function(){return!0};
U.prototype.layoutCallback=function(){this.scheduleLayout(this.slides_[this.currentIndex_]);this.preloadNext_(1);return Promise.resolve()};U.prototype.viewportCallback=function(a){this.updateInViewport(this.slides_[this.currentIndex_],a)};
U.prototype.go=function(a,b){var c=this.nextIndex_(a);if(c!=this.currentIndex_){var d=this.slides_[c],e=this.slides_[this.currentIndex_];this.currentIndex_=c;this.prepareSlide_(d,a);if(b){var f=this;e.style.zIndex=0;N(this.createTransition_(e,d,a),200,"ease-out").thenAlways(function(){f.commitSwitch_(e,d);f.preloadNext_(a)})}else this.commitSwitch_(e,d)}};
U.prototype.prepareSlide_=function(a,b){var c=b*this.element.offsetWidth;D(a,{transform:"string"==typeof c?"translateX("+c+")":"translateX("+(c+"px")+")",zIndex:1,display:"block"});this.scheduleLayout(a)};U.prototype.createTransition_=function(a,b,c){return P([Q(b,{transform:S(R(c*this.element.offsetWidth,0)),opacity:R(.8,1)}),Q(a,{transform:T(R(1,.98)),opacity:R(1,.4)})])};
U.prototype.commitSwitch_=function(a,b){a.style.display="none";a.style.zIndex=0;a.style.transform="";a.style.transition="";a.style.opacity=1;b.style.display="block";b.style.zIndex=0;b.style.transform="";b.style.transition="";b.style.opacity=1;this.scheduleLayout(b);this.updateInViewport(a,!1);this.updateInViewport(b,!0)};U.prototype.nextIndex_=function(a){a=this.currentIndex_+a;0>a?a=this.slides_.length+a:a>=this.slides_.length&&(a%=this.slides_.length);return a};
U.prototype.preloadNext_=function(a){a=this.nextIndex_(a);a!=this.currentIndex_&&this.schedulePreload(this.slides_[a])};AMP.registerElement("amp-slides",U);
});
//# sourceMappingURL=amp-slides-0.1.js.map

