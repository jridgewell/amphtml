(window.AMP = window.AMP || []).push(function(AMP) {var process={env:{NODE_ENV:"production"}};var m="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function n(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(m.Object.defineProperties){var e=m.Object.getOwnPropertyDescriptor(b,d);void 0!==e&&m.Object.defineProperty(a,d,e)}else a[d]=b[d]};var p=null,q="";
function r(){if(p)return p;var a;if(window.context&&window.context.mode)a=window.context.mode;else{a=("localhost"==location.hostname||location.ancestorOrigins&&location.ancestorOrigins[0]&&0==location.ancestorOrigins[0].indexOf("http://localhost:"))&&!!document.querySelector('script[src*="/dist/"],script[src*="/base/"]');var b=location.originalHash||location.hash,c=Object.create(null);if(b){if(0==b.indexOf("?")||0==b.indexOf("#"))b=b.substr(1);for(var b=b.split("&"),d=0;d<b.length;d++){var e=b[d],
f=e.indexOf("="),g=void 0,h=void 0;-1!=f?(g=decodeURIComponent(e.substring(0,f)).trim(),h=decodeURIComponent(e.substring(f+1)).trim()):(g=decodeURIComponent(e).trim(),h="");g&&(c[g]=h)}}q||(q=a?"1463506055389":window.AMP_CONFIG&&window.AMP_CONFIG.v?window.AMP_CONFIG.v:"1463506055389");a={localDev:a,development:"1"==c.development||window.AMP_DEV_MODE,filter:c.filter,minified:"production"==process.env.NODE_ENV,test:window.AMP_TEST,log:c.log,version:q}}return p=a};var ba=(new Date).getTime();function u(a,b,c){this.win=a.AMP_TEST?a.parent:a;this.levelFunc_=b;this.level_=this.calcLevel_();this.suffix_=c||""}u.prototype.calcLevel_=function(){var a=r();return this.win.console&&this.win.console.log&&"0"!=a.log?this.win.ENABLE_LOG?4:a.localDev&&!a.log?3:this.levelFunc_(a):0};
u.prototype.msg_=function(a,b,c){if(0!=this.level_){var d=this.win.console.log;"ERROR"==b?d=this.win.console.error||d:"INFO"==b?d=this.win.console.info||d:"WARN"==b&&(d=this.win.console.warn||d);c.unshift((new Date).getTime()-ba,"["+a+"]");d.apply(this.win.console,c)}};u.prototype.isEnabled=function(){return 0!=this.level_};u.prototype.fine=function(a,b){4<=this.level_&&this.msg_(a,"FINE",Array.prototype.slice.call(arguments,1))};
u.prototype.info=function(a,b){3<=this.level_&&this.msg_(a,"INFO",Array.prototype.slice.call(arguments,1))};u.prototype.warn=function(a,b){2<=this.level_&&this.msg_(a,"WARN",Array.prototype.slice.call(arguments,1))};u.prototype.error=function(a,b){if(1<=this.level_)this.msg_(a,"ERROR",Array.prototype.slice.call(arguments,1));else{var c=v.apply(null,Array.prototype.slice.call(arguments,1));this.prepareError_(c);this.win.setTimeout(function(){throw c;})}};
u.prototype.createError=function(a){var b=v.apply(null,arguments);this.prepareError_(b);return b};
u.prototype.assert=function(a,b,c){var d=void 0;if(!a){var e=(b||"Assertion failed").split("%s"),f=e.shift(),g=f,h=[];""!=f&&h.push(f);for(f=2;f<arguments.length;f++){var k=arguments[f];k&&k.tagName&&(d=k);var t=e.shift();h.push(k);var x=t.trim();""!=x&&h.push(x);k=k instanceof Element?k.tagName.toLowerCase()+(k.id?"#"+k.id:""):k;g+=k+t}e=Error(g);e.fromAssert=!0;e.associatedElement=d;e.messageArray=h;this.prepareError_(e);throw e;}return a};
u.prototype.assertEnumValue=function(a,b,c){for(var d in a)if(a[d]==b)return a[d];this.assert(!1,'Unknown %s value: "%s"',c||"enum",b)};u.prototype.prepareError_=function(a){this.suffix_&&(a.message?-1==a.message.indexOf(this.suffix_)&&(a.message+=this.suffix_):a.message=this.suffix_)};function v(a){for(var b=null,c="",d=0;d<arguments.length;d++){var e=arguments[d];e instanceof Error&&!b?b=e:(c&&(c+=" "),c+=e)}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}
var y=new u(window,function(a){var b=parseInt(a.log,10);return a.development||1<=b?4:0},"\u200b\u200b\u200b");new u(window,function(a){a=parseInt(a.log,10);return 3<=a?4:2<=a?3:0});function ca(a){return a.replace(/-([a-z])/g,function(a,c){return c.toUpperCase()})}function da(a,b){if(b.length>a.length)return!1;var c=a.length-b.length;return a.indexOf(b,c)==c};var z=window.document.createElement("a"),A=Object.create(null),ea=/[?&]amp_js[^&]*/;
function B(a){var b=A[a];if(b)return b;z.href=a;var b={href:z.href,protocol:z.protocol,host:z.host,hostname:z.hostname,port:"0"==z.port?"":z.port,pathname:z.pathname,search:z.search,hash:z.hash},c;z.origin&&"null"!=z.origin?c=z.origin:(c=b,"string"==typeof c&&(c=B(c)),c="data:"!=c.protocol&&c.host?c.protocol+"//"+c.host:c.href);b.origin=c;y.assert(b.origin,"Origin must exist");A[a]=window.AMP_TEST&&Object.freeze?Object.freeze(b):b;return b};function fa(a,b,c){if(b(a))c();else{var d=a.ownerDocument.defaultView;if(d.MutationObserver){var e=new d.MutationObserver(function(){b(a)&&(e.disconnect(),c())});e.observe(a,{childList:!0})}else var f=d.setInterval(function(){b(a)&&(d.clearInterval(f),c())},5)}}function ga(a,b){fa(a.documentElement,function(){return!!a.body},b)}function ha(a){return new Promise(function(b){ga(a,b)})};var ia={doubleclick:["https://www.googletagservices.com/tag/js/gpt.js","https://securepubads.g.doubleclick.net/static/glade.js"],a9:"https://c.amazon-adsystem.com/aax2/assoc.js",adblade:"https://web.adblade.com/js/ads/async/show.js",adsense:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",aduptech:"https://s.d.adup-tech.com/jsapi",criteo:"https://static.criteo.net/js/ld/publishertag.js",dotandads:"https://amp.ad.dotandad.com/dotandadsAmp.js",industrybrains:"https://web.industrybrains.com/js/ads/async/show.js",
mediaimpact:"https://ec-ns.sascdn.com/diff/251/divscripte/amp.js",openx:"https://www.googletagservices.com/tag/js/gpt.js",smartadserver:"https://ec-ns.sascdn.com/diff/js/smart.js","mantis-display":"https://assets.mantisadnetwork.com/mantodea.min.js","mantis-recommend":"https://assets.mantisadnetwork.com/recommend.min.js",sovrn:"https://ap.lijit.com/www/sovrn_amp/sovrn_ads.js",yieldmo:"https://static.yieldmo.com/ym.amp1.js",revcontent:"https://labs-cdn.revcontent.com/build/amphtml/revcontent.amp.min.js",
teads:"https://cdn.teads.tv/media/format/v3/teads-format.min.js",imobile:"https://spamp.i-mobile.co.jp/script/amp.js",pubmatic:"https://ads.pubmatic.com/AdServer/js/amp.js",sortable:"https://www.googletagservices.com/tag/js/gpt.js",gmossp:"https://cdn.gmossp-sp.jp/ads/amp.js","weborama-display":["https://cstatic.weborama.fr/js/advertiserv2/adperf_launch_1.0.0_scrambled.js","https://cstatic.weborama.fr/js/advertiserv2/adperf_core_1.0.0_scrambled.js"],yieldbot:"https://cdn.yldbt.com/js/yieldbot.intent.js",
adstir:"https://js.ad-stir.com/js/adstir_async.js",colombia:"https://static.clmbtech.com/ad/commons/js/colombia-amp.js",eplanning:"https://us.img.e-planning.net/layers/epl-amp.js",appnexus:"https://acdn.adnxs.com/ast/ast.js",microad:"https://j.microad.net/js/camp.js"},ja={adblade:["https://staticd.cdn.adblade.com","https://static.adblade.com"],industrybrains:["https://staticd.cdn.industrybrains.com","https://static.industrybrains.com"],adition:"https://imagesrv.adition.com",adform:"https://track.adform.net",
adreactor:"https://adserver.adreactor.com",adsense:"https://googleads.g.doubleclick.net",aduptech:"https://s.d.adup-tech.com",taboola:["https://cdn.taboola.com","https://trc.taboola.com","https://images.taboola.com"],teads:["https://cdn.teads.tv","https://cdn2.teads.tv","https://a.teads.tv","https://t.teads.tv"],criteo:["https://cas.criteo.com"],doubleclick:["https://partner.googleadservices.com","https://securepubads.g.doubleclick.net","https://tpc.googlesyndication.com"],"mantis-display":["https://mantodea.mantisadnetwork.com",
"https://res.cloudinary.com","https://resize.mantisadnetwork.com"],"mantis-recommend":["https://mantodea.mantisadnetwork.com","https://resize.mantisadnetwork.com"],dotandads:"https://bal.ad.dotandad.com",improvedigital:"https://ad.360yield.com/",openx:["https://partner.googleadservices.com","https://securepubads.g.doubleclick.net","https://tpc.googlesyndication.com"],yieldmo:["https://static.yieldmo.com","https://s.yieldmo.com","https://ads.yieldmo.com"],triplelift:["https://ib.3lift.com","https://dynamic.3lift.com",
"https://img.3lift.com","https://eb2.3lift.com"],revcontent:["https://trends.revcontent.com","https://cdn.revcontent.com","https://img.revcontent.com"],rubicon:["https://ads.rubiconproject.com","https://optimized-by.rubiconproject.com"],sortable:["https://tags-cdn.deployads.com","https://partner.googleadservices.com","https://securepubads.g.doubleclick.net","https://tpc.googlesyndication.com"],imobile:"https://spad.i-mobile.co.jp",webediads:["https://eu1.wbdds.com"],gmossp:"https://cdn.gmossp-sp.jp",
yieldbot:"https://i.yldbt.com",adstir:"https://ad.ad-stir.com",appnexus:"https://ib.adnxs.com",microad:["https://s-rtb.send.microad.jp","https://cache.send.microad.jp"]},ka={adsense:"AMP_ECID_GOOGLE",doubleclick:"AMP_ECID_GOOGLE"};function D(a,b,c){var d=E(a),e=d[b];e||(e=d[b]={obj:null,promise:null,resolve:null});e.obj||(e.obj=c(a),e.promise||(e.promise=Promise.resolve(e.obj)),e.resolve&&e.resolve(e.obj));return e.obj}function F(a,b){var c=E(a),d=c[b];if(d)return d.promise;var e=void 0,d=new Promise(function(a){e=a});c[b]={obj:null,promise:d,resolve:e};return d}function la(a,b){var c=E(a);return c[b]?c[b].promise:null}function E(a){var b=a.services;b||(b=a.services={});return b};function G(a){this.win=a;this.resolved_=Promise.resolve();this.taskCount_=0;this.canceled_={};this.startTime_=this.now()}G.prototype.now=function(){return Date.now()};G.prototype.timeSinceStart=function(){return this.now()-this.startTime_};G.prototype.delay=function(a,b){if(!b){var c=this,d="p"+this.taskCount_++;this.resolved_.then(function(){c.canceled_[d]?delete c.canceled_[d]:a()});return d}return this.win.setTimeout(a,b)};
G.prototype.cancel=function(a){"string"==typeof a?this.canceled_[a]=!0:this.win.clearTimeout(a)};G.prototype.promise=function(a,b){var c=this,d=null;return(new Promise(function(e,f){d=c.delay(function(){d=-1;e(b)},a);-1==d&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=d&&c.cancel(d);throw a;})};
G.prototype.timeoutPromise=function(a,b,c){var d=this,e=null,f=(new Promise(function(b,f){e=d.delay(function(){e=-1;f(y.createError(c||"timeout"))},a);-1==e&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=e&&d.cancel(e);throw a;});return b?Promise.race([f,b]):f};var H=new G(window);function ma(a,b,c){return I(a,b,c).then(function(a){return y.assert(a,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.",b,c,c,c)})}function I(a,b,c){var d=la(a,b);return d?d:Promise.resolve().then(function(){return a.ampExtendedElements[c]?F(a,b):ha(a.document).then(function(){return a.ampExtendedElements[c]?F(a,b):null})})};function na(a){return I(a,"cid","amp-analytics")};function J(a,b,c,d){function e(a){c(a);g()}var f=d||!1,g=void 0,g=function(){a&&a.removeEventListener(b,e,f);e=a=null};a.addEventListener(b,e,f);return g}
function K(a,b){var c=void 0,d=void 0,e=new Promise(function(b,e){a.complete||"complete"==a.readyState?b(a):(c="AUDIO"===a.tagName||"VIDEO"===a.tagName?J(a,"loadstart",function(){return b(a)}):J(a,"load",function(){return b(a)}),d=J(a,"error",function(){e(y.createError("Failed HTTP request for %s.",a))}))});return oa(e,function(){c&&c();d&&d()},b)}function oa(a,b,c){var d=void 0,d=void 0===c?a:H.timeoutPromise(c||0,a);return b?d.then(function(a){b();return a},function(a){b();throw a;}):d};function L(a){this.navigator=a.navigator}L.prototype.isIos=function(){return/iPhone|iPad|iPod/i.test(this.navigator.userAgent)};L.prototype.isSafari=function(){return/Safari/i.test(this.navigator.userAgent)&&!this.isChrome()&&!this.isEdge()};L.prototype.isChrome=function(){return/Chrome|CriOS/i.test(this.navigator.userAgent)&&!this.isEdge()};L.prototype.isFirefox=function(){return/Firefox/i.test(this.navigator.userAgent)&&!this.isEdge()};
L.prototype.isIe=function(){return/MSIE/i.test(this.navigator.userAgent)||/IEMobile/i.test(this.navigator.userAgent)};L.prototype.isEdge=function(){return/Edge/i.test(this.navigator.userAgent)};L.prototype.isWebKit=function(){return/WebKit/i.test(this.navigator.userAgent)&&!this.isEdge()};function M(a){return D(a,"platform",function(){return new L(a)})}M(window);function N(){this.handlers_=[]}N.prototype.add=function(a){var b=this;this.handlers_.push(a);return function(){b.remove(a)}};N.prototype.remove=function(a){for(var b=0;b<this.handlers_.length;b++)if(a==this.handlers_[b]){this.handlers_.splice(b,1);break}};N.prototype.fire=function(a){this.handlers_.forEach(function(b){b(a)})};N.prototype.getHandlerCount=function(){return this.handlers_.length};function pa(a){return ma(a,"userNotificationManager","amp-user-notification")};function qa(a){var b=ka[a.element.getAttribute("type")],c=a.element.getAttribute("data-consent-notification-id");return b||c?na(a.getWin()).then(function(d){if(d){var e=Promise.resolve();return c&&(e=pa(a.getWin()).then(function(a){return a.get(c)}),!b&&c)?e:d.get(b,e)}}):Promise.resolve()};function O(a,b,c){var d=a.listeningFors;!d&&c&&(d=a.listeningFors=Object.create(null));a=d||null;if(!a)return a;d=a[b];!d&&c&&(d=a[b]=[]);return d||null}function ra(a,b){for(var c=B(b.src).origin,c=O(a,c,!0),d=void 0,e=0;e<c.length;e++){var f=c[e];if(f.frame===b){d=f;break}}d||(d={frame:b,events:Object.create(null)},c.push(d));return d.events}
function sa(a){for(var b={sentinel:"unlisten"},c=a.length-1;0<=c;c--){var d=a[c];if(!d.frame.contentWindow){a.splice(c,1);var d=d.events,e;for(e in d)d[e].splice(0,Infinity).forEach(function(a){a(b)})}}}
function ta(a){a.listeningFors||a.addEventListener("message",function(b){if(b.data){var c;c=b.source;var d=O(a,b.origin);if(d){for(var e=void 0,f=0;f<d.length;f++){var g=d[f],h=g.frame.contentWindow;if(!h)setTimeout(sa,0,d);else if(h===c){e=g;break}}c=e?e.events:null}else c=d;if(c){b=b.data;if("string"===typeof b&&"{"===b.charAt(0))try{b=JSON.parse(b)}catch(k){log.warn("Postmessage could not be parsed. Is it in a valid JSON format?",k)}if(c=c[b.type])for(c=c.slice(),d=0;d<c.length;d++)(0,c[d])(b)}}})}
function Q(a,b,c,d){function e(a){"unlisten"==a.sentinel?k():a.sentinel==g&&c(a)}var f=a.ownerDocument.defaultView;ta(f);a=ra(f,a);var g=R(d),h=a[b]||(a[b]=[]),k=void 0;h.push(e);return k=function(){if(e){var a=h.indexOf(e);-1<a&&h.splice(a,1);c=h=e=null}}}function S(a,b,c,d){var e=Q(a,b,function(a){e();return c(a)},d);return e}function T(a,b,c,d,e){a.contentWindow&&(c.type=b,c.sentinel=R(e),e&&(c="amp-"+JSON.stringify(c)),a.contentWindow.postMessage(c,d))}
function R(a){return a?"amp-5ece11a3f055ead22ca35531763046ffb704f1193dec88a9257ebfe91dc7982c":"amp"};function U(a,b,c,d){return{left:a,top:b,width:c,height:d,bottom:b+d,right:a+c}};function V(a,b,c){this.handlers_=[];this.baseElement_=a;this.iframe_=b;this.is3p_=c||!1;this.inViewport_=this.shouldSendIntersectionChanges_=!1;this.pendingChanges_=[];this.flushTimeout_=0;this.boundFlush_=this.flush_.bind(this);this.init_()}n(V,N);V.prototype.init_=function(){var a=this;Q(this.iframe_,"send-intersections",function(){a.startSendingIntersectionChanges_()},this.is3p_);this.add(function(){a.sendElementIntersection_()})};
V.prototype.startSendingIntersectionChanges_=function(){var a=this;this.shouldSendIntersectionChanges_=!0;this.baseElement_.getVsync().measure(function(){if(a.baseElement_.isInViewport())a.onViewportCallback(!0);a.fire()})};
V.prototype.onViewportCallback=function(a){if(this.inViewport_!=a)if(this.inViewport_=a,this.fire(),a){a=this.fire.bind(this);var b=this.baseElement_.getViewport().onScroll(a),c=this.baseElement_.getViewport().onChanged(a);this.unlistenViewportChanges_=function(){b();c()}}else this.unlistenViewportChanges_&&(this.unlistenViewportChanges_(),this.unlistenViewportChanges_=null)};
V.prototype.sendElementIntersection_=function(){if(this.shouldSendIntersectionChanges_){var a=this.baseElement_.element.getIntersectionChangeEntry();0<this.pendingChanges_.length&&this.pendingChanges_[this.pendingChanges_.length-1].time==a.time||(this.pendingChanges_.push(a),this.flushTimeout_||(this.flush_(),this.flushTimeout_=H.delay(this.boundFlush_,100)))}};
V.prototype.flush_=function(){this.flushTimeout_=0;if(this.pendingChanges_.length){var a=this.iframe_.src?B(this.iframe_.src).origin:"*";T(this.iframe_,"intersection",{changes:this.pendingChanges_},a,this.is3p_);this.pendingChanges_.length=0}};function ua(a){return D(a,"documentInfo",function(){var b=B(y.assert(a.document.querySelector("link[rel=canonical]"),"AMP files are required to have a <link rel=canonical> tag.").href).href,c=String(Math.floor(1E4*a.Math.random())),d;d=a.location.href;"string"==typeof d&&(d=B(d));var e=d;"string"==typeof e&&(e=B(e));var f=e.pathname.split("/")[1];if("https://cdn.ampproject.org"!=e.origin&&(0!=e.origin.indexOf("http://localhost:")||"c"!=f&&"v"!=f))d=d.href;else{e=d.pathname.split("/");f=e[1];y.assert("c"==
f||"v"==f,"Unknown path prefix in url %s",d.href);var f=e[2],g="s"==f?"https://"+decodeURIComponent(e[3]):"http://"+decodeURIComponent(f);y.assert(0<g.indexOf("."),"Expected a . in origin %s",g);e.splice(1,"s"==f?3:2);e=g+e.join("/");f=(f=d.search)&&"?"!=f?(f=f.replace(ea,"").replace(/^[?&]/,""))?"?"+f:"":"";d=e+f+(d.hash||"")}return{canonicalUrl:b,pageViewId:c,sourceUrl:d}})};function W(a){this.document_=a.document;this.head_=a.document.head;this.origins_={};this.urls_={};this.platform_=M(a);this.origins_[B(a.location.href).origin]=!0;this.preloadSupported_=this.isPreloadSupported_()}
W.prototype.url=function(a,b){if(this.isInterestingUrl_(a)){var c=B(a).origin,d=H.now(),e=this.origins_[c];if(e&&d<e)b&&(this.origins_[c]=d+18E4);else{this.origins_[c]=d+(b?18E4:1E4);var f=this.document_.createElement("link");f.setAttribute("rel","dns-prefetch");f.setAttribute("href",c);var g=this.document_.createElement("link");g.setAttribute("rel","preconnect");g.setAttribute("href",c);this.head_.appendChild(f);this.head_.appendChild(g);H.delay(function(){f.parentNode&&f.parentNode.removeChild(f);
g.parentNode&&g.parentNode.removeChild(g)},1E4);this.preconnectPolyfill_(c)}}};W.prototype.prefetch=function(a,b){if(this.isInterestingUrl_(a)&&!this.urls_[a]){var c=this.preloadSupported_?"preload":"prefetch";this.urls_[a]=!0;this.url(a,!0);var d=this.document_.createElement("link");d.setAttribute("rel",c);d.setAttribute("href",a);b&&d.setAttribute("as",b);this.head_.appendChild(d)}};W.prototype.isInterestingUrl_=function(a){return 0==a.indexOf("https:")||0==a.indexOf("http:")?!0:!1};
W.prototype.isPreloadSupported_=function(){var a=this.document_.createElement("link").relList;return a&&a.supports?this.preloadSupported_=a.supports("preload"):this.preloadSupported_=!1};W.prototype.preconnectPolyfill_=function(a){if(this.platform_.isSafari()){this.origins_[a]=H.now()+18E4;var b=new XMLHttpRequest;b.open("HEAD",a+"/amp_preconnect_polyfill_404_or_other_error_expected._Do_not_worry_about_it?"+Math.random(),!0);b.send()}};
function va(a){return D(a,"preconnect",function(){return new W(a)})};var X={};
function wa(a,b,c){var d=H.now(),e=b.getAttribute("width"),f=b.getAttribute("height"),g=c||b.getAttribute("type");y.assert(g,"Attribute type required for <amp-ad>: %s",b);c={};for(var h=0;h<b.attributes.length;h++){var k=b.attributes[h];0==k.name.indexOf("data-")&&(c[ca(k.name.substr(5))]=k.value)}if(h=b.getAttribute("json")){k=void 0;try{k=JSON.parse(h)}catch(Da){throw y.createError("Error parsing JSON in json attribute in element %s",b);}for(var t in k)c[t]=k[t]}c.width=parseFloat(e);c.height=parseFloat(f);
c.type=g;t=ua(a);var x=D(a,"viewer"),h=a.location.href;"about:srcdoc"==h&&(h=a.parent.location.href);e=x.getUnconfirmedReferrerUrl();f=t.canonicalUrl;t=t.pageViewId;var g=b.getAttribute("ampcid"),h={href:h},k=b.tagName,ya=r(),x=!x.isVisible(),za=H.now();a=D(a,"viewport").getRect();var l=b.getLayoutBox();a.x=a.left;a.y=a.top;var w=-1*a.x,C=-1*a.y,w=0==w&&0==C?l:U(l.left+w,l.top+C,l.width,l.height);w.x=w.left;w.y=w.top;a:{var C=Math.max(a.left,l.left),aa=Math.min(a.left+a.width,l.left+l.width);if(C<=
aa){var P=Math.max(a.top,l.top),l=Math.min(a.top+a.height,l.top+l.height);if(P<=l){l=U(C,P,aa-C,l-P);break a}}l=null}l=l||U(0,0,0,0);l.x=l.left;l.y=l.top;c._context={referrer:e,canonicalUrl:f,pageViewId:t,clientId:g,location:h,tagName:k,mode:ya,hidden:x,initialIntersection:{time:za,rootBounds:a,boundingClientRect:w,intersectionRect:l},startTime:d};if(b=b.getAttribute("src"))c.src=b;return c}
function xa(a,b,c){b=wa(a,b,c);c=a.document.createElement("iframe");X[b.type]||(X[b.type]=0);var d=Aa(a);a=B(d).hostname;d=d+"#"+JSON.stringify(b);a=a+"_"+b.type+"_"+X[b.type]++;c.src=d;c.name=a;c.ampLocation=B(d);c.width=b.width;c.height=b.height;c.style.border="none";c.setAttribute("scrolling","no");c.onload=function(){this.readyState="complete"};return c}function Ba(a){var b=Aa(a);a=va(a);a.prefetch(b,"document");a.prefetch("https://3p.ampproject.net/1463506055389/f.js","script")}
function Aa(a,b){return D(window,"bootstrapBaseUrl",function(){var c;if(c=a.document.querySelector('meta[name="amp-3p-iframe-src"]')){var d=c.getAttribute("content");y.assert(null!=d,"%s source must be available",c);var e=B(d);y.assert("https:"==e.protocol||/^(\/\/)/.test(d)||"localhost"==e.hostname||da(e.hostname,".localhost"),'%s source must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',c,d);y.assert(-1==d.indexOf("?"),"3p iframe url must not include query string %s in element %s.",
d,c);e=B(d);y.assert("localhost"==e.hostname&&!b||e.origin!=B(a.location.href).origin,"3p iframe url must not be on the same origin as the current document %s (%s) in element %s. See https://github.com/ampproject/amphtml/blob/master/spec/amp-iframe-origin-policy.md for details.",d,e.origin,c);c=d+"?1463506055389"}else c=null;c||(r().localDev?c="http://ads.localhost:"+(a.location.port||a.parent.location.port)+"/dist.3p/current"+(r().minified?"-min/frame":"/frame.max")+".html":(c=void 0,
a.crypto&&a.crypto.getRandomValues?(c=new Uint32Array(2),a.crypto.getRandomValues(c),c=String(c[0])+c[1]):c=String(a.Math.random()).substr(2)+"0",c="https://d-"+c+".ampproject.net/1463506055389/frame.html"));return c})};var Ca={"AMP-FX-FLYING-CARPET":!0,"AMP-LIGHTBOX":!0,"AMP-STICKY-AD":!0},Y=0;function Z(a){AMP.BaseElement.apply(this,arguments)}n(Z,AMP.BaseElement);Z.prototype.getPriority=function(){return 2};Z.prototype.renderOutsideViewport=function(){return 0<Y?!1:"prefer-viewability-over-views"==this.element.getAttribute("data-loading-strategy")?1.25:AMP.BaseElement.prototype.renderOutsideViewport.call(this)};
Z.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};Z.prototype.isReadyToBuild=function(){return!1};Z.prototype.buildCallback=function(){this.iframe_=null;this.placeholder_=this.getPlaceholder();this.fallback_=this.getFallback();this.isInFixedContainer_=!1;this.intersectionObserver_=this.unlistenViewportChanges_=this.iframeLayoutBox_=null;var a=this.getWin();this.viewer_=D(a,"viewer")};
Z.prototype.preconnectCallback=function(a){Ba(this.getWin());var b=this.element.getAttribute("type"),c=ia[b],b=ja[b];if("string"==typeof c)this.preconnect.prefetch(c,"script");else if(c){var d=this;c.forEach(function(a){d.preconnect.prefetch(a,"script")})}if("string"==typeof b)this.preconnect.url(b,a);else if(b){var e=this;b.forEach(function(b){e.preconnect.url(b,a)})}(c=this.element.getAttribute("src"))&&this.preconnect.url(c)};
Z.prototype.onLayoutMeasure=function(){this.isInFixedContainer_=this.isPositionFixed();this.measureIframeLayoutBox_();this.intersectionObserver_&&this.intersectionObserver_.fire()};Z.prototype.measureIframeLayoutBox_=function(){this.iframe_&&(this.iframeLayoutBox_=this.getViewport().getLayoutRect(this.iframe_))};
Z.prototype.getIntersectionElementLayoutBox=function(){if(!this.iframe_)return AMP.BaseElement.prototype.getIntersectionElementLayoutBox.call(this);this.iframeLayoutBox_||this.measureIframeLayoutBox_();return this.iframeLayoutBox_};Z.prototype.isPositionFixed=function(){var a=this.element,b=!1;do{if(Ca[a.tagName])return!1;"fixed"==this.getWin().getComputedStyle(a).position&&(b=!0);a=a.parentNode}while("BODY"!=a.tagName);return b};
Z.prototype.layoutCallback=function(){if(!this.iframe_){var a=this;y.assert(!this.isInFixedContainer_,"<amp-ad> is not allowed to be placed in elements with position:fixed: %s",this.element);Y++;H.delay(function(){Y--},1E3);return qa(this).then(function(b){b&&a.element.setAttribute("ampcid",b);a.iframe_=xa(a.element.ownerDocument.defaultView,a.element);a.iframe_.setAttribute("scrolling","no");a.applyFillContent(a.iframe_);a.intersectionObserver_=new V(a,a.iframe_,!0);S(a.iframe_,"no-content",function(){a.noContentHandler_()},
!0);S(a.iframe_,"entity-id",function(b){a.element.creativeId=b.id},!0);Q(a.iframe_,"embed-size",function(b){var d=void 0,e;void 0!==b.width&&(e=Math.max(a.element.offsetWidth+b.width-a.iframe_.offsetWidth,b.width),a.iframe_.width=b.width,a.element.setAttribute("width",e));void 0!==b.height&&(d=Math.max(a.element.offsetHeight+b.height-a.iframe_.offsetHeight,b.height),a.iframe_.height=b.height,a.element.setAttribute("height",d));void 0===d&&void 0===e||a.updateSize_(d,e)},!0);a.iframe_.style.visibility=
"hidden";S(a.iframe_,"render-start",function(){a.iframe_.style.visibility="";a.sendEmbedInfo_(a.isInViewport())},!0);a.viewer_.onVisibilityChanged(function(){a.sendEmbedInfo_(a.isInViewport())});a.element.appendChild(a.iframe_);return K(a.iframe_)})}return K(this.iframe_)};
Z.prototype.unlayoutCallback=function(){if(!this.iframe_)return!0;var a=this.iframe_;a.parentElement&&a.parentElement.removeChild(a);this.placeholder_&&this.togglePlaceholder(!0);this.fallback_&&this.toggleFallback(!1);this.intersectionObserver_=this.iframe_=null;return!0};Z.prototype.viewportCallback=function(a){if(this.intersectionObserver_)this.intersectionObserver_.onViewportCallback(a);this.sendEmbedInfo_(a)};
Z.prototype.sendEmbedInfo_=function(a){if(this.iframe_){var b=this.iframe_.src?B(this.iframe_.src).origin:"*";T(this.iframe_,"embed-state",{inViewport:a,pageHidden:!this.viewer_.isVisible()},b,!0)}};Z.prototype.overflowCallback=function(a,b,c){a&&(a=this.iframe_.src?B(this.iframe_.src).origin:"*",T(this.iframe_,"embed-size-denied",{requestedHeight:b,requestedWidth:c},a,!0))};
Z.prototype.updateSize_=function(a,b){var c=this;this.attemptChangeSize(a,b,function(){var d=c.iframe_.src?B(c.iframe_.src).origin:"*";T(c.iframe_,"embed-size-changed",{requestedHeight:a,requestedWidth:b},d,!0)})};
Z.prototype.noContentHandler_=function(){var a=this;if(!this.fallback_){var b=this;this.attemptChangeHeight(0,function(){b.element.style.display="none"})}this.deferMutate(function(){a.fallback_&&(a.placeholder_&&a.togglePlaceholder(!1),a.toggleFallback(!0));if(-1==a.iframe_.name.indexOf("_master")){var b=a.iframe_;b.parentElement&&b.parentElement.removeChild(b);a.iframe_=null}})};AMP.registerElement("amp-ad",Z);AMP.registerElement("amp-embed",Z);
});
//# sourceMappingURL=amp-ad-0.1.js.map

