(window.AMP = window.AMP || []).push(function(AMP) {var process={env:{NODE_ENV:"production"}};var h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function l(a,b){function d(){}d.prototype=b.prototype;a.prototype=new d;a.prototype.constructor=a;for(var c in b)if(h.Object.defineProperties){var e=h.Object.getOwnPropertyDescriptor(b,c);void 0!==e&&h.Object.defineProperty(a,c,e)}else a[c]=b[c]};var n=null,p="";var q=(new Date).getTime();function r(a,b,d){this.win=a.AMP_TEST?a.parent:a;this.levelFunc_=b;this.level_=this.calcLevel_();this.suffix_=d||""}
r.prototype.calcLevel_=function(){var a;if(n)a=n;else{if(window.context&&window.context.mode)a=window.context.mode;else{a=("localhost"==location.hostname||location.ancestorOrigins&&location.ancestorOrigins[0]&&0==location.ancestorOrigins[0].indexOf("http://localhost:"))&&!!document.querySelector('script[src*="/dist/"],script[src*="/base/"]');var b=location.originalHash||location.hash,d=Object.create(null);if(b){if(0==b.indexOf("?")||0==b.indexOf("#"))b=b.substr(1);for(var b=b.split("&"),c=0;c<b.length;c++){var e=
b[c],f=e.indexOf("="),g=void 0,k=void 0;-1!=f?(g=decodeURIComponent(e.substring(0,f)).trim(),k=decodeURIComponent(e.substring(f+1)).trim()):(g=decodeURIComponent(e).trim(),k="");g&&(d[g]=k)}}p||(p=a?"1463506055389":window.AMP_CONFIG&&window.AMP_CONFIG.v?window.AMP_CONFIG.v:"1463506055389");a={localDev:a,development:"1"==d.development||window.AMP_DEV_MODE,filter:d.filter,minified:"production"==process.env.NODE_ENV,test:window.AMP_TEST,log:d.log,version:p}}a=n=a}return this.win.console&&
this.win.console.log&&"0"!=a.log?this.win.ENABLE_LOG?4:a.localDev&&!a.log?3:this.levelFunc_(a):0};r.prototype.msg_=function(a,b,d){if(0!=this.level_){var c=this.win.console.log;"ERROR"==b?c=this.win.console.error||c:"INFO"==b?c=this.win.console.info||c:"WARN"==b&&(c=this.win.console.warn||c);d.unshift((new Date).getTime()-q,"["+a+"]");c.apply(this.win.console,d)}};r.prototype.isEnabled=function(){return 0!=this.level_};
r.prototype.fine=function(a,b){4<=this.level_&&this.msg_(a,"FINE",Array.prototype.slice.call(arguments,1))};r.prototype.info=function(a,b){3<=this.level_&&this.msg_(a,"INFO",Array.prototype.slice.call(arguments,1))};r.prototype.warn=function(a,b){2<=this.level_&&this.msg_(a,"WARN",Array.prototype.slice.call(arguments,1))};
r.prototype.error=function(a,b){if(1<=this.level_)this.msg_(a,"ERROR",Array.prototype.slice.call(arguments,1));else{var d=t.apply(null,Array.prototype.slice.call(arguments,1));this.prepareError_(d);this.win.setTimeout(function(){throw d;})}};r.prototype.createError=function(a){var b=t.apply(null,arguments);this.prepareError_(b);return b};
r.prototype.assert=function(a,b,d){var c=void 0;if(!a){var e=(b||"Assertion failed").split("%s"),f=e.shift(),g=f,k=[];""!=f&&k.push(f);for(f=2;f<arguments.length;f++){var m=arguments[f];m&&m.tagName&&(c=m);var x=e.shift();k.push(m);var y=x.trim();""!=y&&k.push(y);m=m instanceof Element?m.tagName.toLowerCase()+(m.id?"#"+m.id:""):m;g+=m+x}e=Error(g);e.fromAssert=!0;e.associatedElement=c;e.messageArray=k;this.prepareError_(e);throw e;}return a};
r.prototype.assertEnumValue=function(a,b,d){for(var c in a)if(a[c]==b)return a[c];this.assert(!1,'Unknown %s value: "%s"',d||"enum",b)};r.prototype.prepareError_=function(a){this.suffix_&&(a.message?-1==a.message.indexOf(this.suffix_)&&(a.message+=this.suffix_):a.message=this.suffix_)};function t(a){for(var b=null,d="",c=0;c<arguments.length;c++){var e=arguments[c];e instanceof Error&&!b?b=e:(d&&(d+=" "),d+=e)}b?d&&(b.message=d+": "+b.message):b=Error(d);return b}
var u=new r(window,function(a){var b=parseInt(a.log,10);return a.development||1<=b?4:0},"\u200b\u200b\u200b");new r(window,function(a){a=parseInt(a.log,10);return 3<=a?4:2<=a?3:0});function v(a){this.win=a;this.resolved_=Promise.resolve();this.taskCount_=0;this.canceled_={};this.startTime_=this.now()}v.prototype.now=function(){return Date.now()};v.prototype.timeSinceStart=function(){return this.now()-this.startTime_};v.prototype.delay=function(a,b){if(!b){var d=this,c="p"+this.taskCount_++;this.resolved_.then(function(){d.canceled_[c]?delete d.canceled_[c]:a()});return c}return this.win.setTimeout(a,b)};
v.prototype.cancel=function(a){"string"==typeof a?this.canceled_[a]=!0:this.win.clearTimeout(a)};v.prototype.promise=function(a,b){var d=this,c=null;return(new Promise(function(e,f){c=d.delay(function(){c=-1;e(b)},a);-1==c&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=c&&d.cancel(c);throw a;})};
v.prototype.timeoutPromise=function(a,b,d){var c=this,e=null,f=(new Promise(function(b,f){e=c.delay(function(){e=-1;f(u.createError(d||"timeout"))},a);-1==e&&f(Error("Failed to schedule timer."))})).catch(function(a){-1!=e&&c.cancel(e);throw a;});return b?Promise.race([f,b]):f};var w=new v(window);function z(a,b,d,c){function e(a){d(a);g()}var f=c||!1,g=void 0,g=function(){a&&a.removeEventListener(b,e,f);e=a=null};a.addEventListener(b,e,f);return g}
function A(a,b){var d=void 0,c=void 0,e=new Promise(function(b,e){a.complete||"complete"==a.readyState?b(a):(d="AUDIO"===a.tagName||"VIDEO"===a.tagName?z(a,"loadstart",function(){return b(a)}):z(a,"load",function(){return b(a)}),c=z(a,"error",function(){e(u.createError("Failed HTTP request for %s.",a))}))});return B(e,function(){d&&d();c&&c()},b)}function B(a,b,d){var c=void 0,c=void 0===d?a:w.timeoutPromise(d||0,a);return b?c.then(function(a){b();return a},function(a){b();throw a;}):c};Object.create(null);function C(a,b){void 0===b&&(b="none"==a.style.display);a.style.display=b?"":"none"};function D(a){u.assert(0<a.length,"Srcset must have at least one source");this.sources_=a;for(var b=a=!1,d=0;d<this.sources_.length;d++){var c=this.sources_[d];u.assert((c.width||c.dpr)&&(!c.width||!c.dpr),"Either dpr or width must be specified");a=a||!!c.width;b=b||!!c.dpr}u.assert(!a||!b,"Srcset cannot have both width and dpr sources");a?this.sources_.sort(E):this.sources_.sort(F);this.widthBased_=a;this.dprBased_=b}
D.prototype.select=function(a,b){var d=-1;this.widthBased_?d=this.selectByWidth_(a,b):this.dprBased_&&(d=this.selectByDpr_(a,b));return-1!=d?this.sources_[d]:this.getLast()};D.prototype.selectByWidth_=function(a,b){for(var d=-1,c=1E6,e=1E6,f=0;f<this.sources_.length;f++){var g=this.sources_[f],k=void 0,k=g.width?g.width/b:c/2,c=Math.min(c,k),g=Math.abs((k-a)/a-.2);g<e&&(e=g,d=f)}return d};
D.prototype.selectByDpr_=function(a,b){for(var d=-1,c=1E6,e=0;e<this.sources_.length;e++){var f=Math.abs((this.sources_[e].dpr||1)-b);f<c&&(c=f,d=e)}return d};D.prototype.getLast=function(){return this.sources_[this.sources_.length-1]};D.prototype.getSources=function(){return this.sources_};D.prototype.stringify=function(){for(var a=[],b=0;b<this.sources_.length;b++){var d=this.sources_[b];d.width?a.push(d.url+" "+d.width+"w"):d.dpr?a.push(d.url+" "+d.dpr+"x"):a.push(""+d.url)}return a.join(", ")};
function E(a,b){u.assert(a.width!=b.width,"Duplicate width: %s",a.width);return b.width-a.width}function F(a,b){u.assert(a.dpr!=b.dpr,"Duplicate dpr: %s",a.dpr);return b.dpr-a.dpr};function G(a){AMP.BaseElement.apply(this,arguments)}l(G,AMP.BaseElement);G.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};G.prototype.isReadyToBuild=function(){return null!=this.element.firstChild};
G.prototype.buildCallback=function(){this.img_=new Image;this.propagateAttributes(["alt"],this.img_);this.applyFillContent(this.img_,!0);var a=this.img_,b;b=this.element.getAttribute("width");b=parseFloat(b);a.width=b;a=this.img_;b=this.element.getAttribute("height");b=parseFloat(b);a.height=b;C(this.img_,!this.getPlaceholder());this.element.appendChild(this.img_);a=this.element;if(b=a.getAttribute("srcset")){a=b.match(/\s*(?:[\S]*)(?:\s+(?:-?(?:\d+(?:\.(?:\d+)?)?|\.\d+)[a-zA-Z]))?(?:\s*,)?/g);u.assert(0<
a.length,"srcset has to have at least one source: %s",void 0);b=[];for(var d=0;d<a.length;d++){var c=a[d].trim();","==c.substr(-1)&&(c=c.substr(0,c.length-1).trim());var e=c.split(/\s+/,2);if(0!=e.length&&(1!=e.length||e[0])&&(2!=e.length||e[0]||e[1]))if(c=e[0],1==e.length||2==e.length&&!e[1])b.push({url:c,width:void 0,dpr:1});else{var e=e[1].toLowerCase(),f=e.substring(e.length-1);"w"==f?b.push({url:c,width:parseFloat(e),dpr:void 0}):"x"==f&&b.push({url:c,width:void 0,dpr:parseFloat(e)})}}a=new D(b)}else a=
u.assert(a.getAttribute("src"),'Either non-empty "srcset" or "src" attribute must be specified: %s',a),a=new D([{url:a,width:void 0,dpr:1}]);this.srcset_=a;this.loadPromise_=null};G.prototype.isRelayoutNeeded=function(){return!0};G.prototype.layoutCallback=function(){return this.updateImageSrc_()};G.prototype.firstLayoutCompleted=function(){};G.prototype.viewportCallback=function(a){if(a&&this.loadPromise_){var b=this;this.loadPromise_.then(function(){return b.updateInViewport_()})}else this.updateInViewport_()};
G.prototype.unlayoutCallback=function(){this.img_.src="";return!0};G.prototype.updateInViewport_=function(){var a=this.isInViewport();this.togglePlaceholder(!a);C(this.img_,a)};
G.prototype.updateImageSrc_=function(){var a=this;if(0>=this.getLayoutWidth())return Promise.resolve();var b=this.srcset_.select(this.getLayoutWidth(),this.getDpr()).url;if(b==this.img_.getAttribute("src"))return Promise.resolve();this.img_.setAttribute("src",b);return this.loadPromise_=A(this.img_).catch(function(b){if(a.img_.getAttribute("src"))throw b;})};AMP.registerElement("amp-anim",G);
});
//# sourceMappingURL=amp-anim-0.1.js.map

